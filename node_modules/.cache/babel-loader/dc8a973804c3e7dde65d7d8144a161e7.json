{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GatewayToken = exports.State = void 0;\n\nconst GatewayTokenData_1 = require(\"../lib/GatewayTokenData\");\n\nconst util_1 = require(\"../lib/util\");\n\nvar State;\n\n(function (State) {\n  State[\"ACTIVE\"] = \"ACTIVE\";\n  State[\"REVOKED\"] = \"REVOKED\";\n  State[\"FROZEN\"] = \"FROZEN\";\n})(State = exports.State || (exports.State = {}));\n\nclass GatewayToken {\n  constructor( //  the key used to reference the issuing gatekeeper\n  issuingGatekeeper, gatekeeperNetwork, owner, state, publicKey, programId, expiryTime) {\n    this.issuingGatekeeper = issuingGatekeeper;\n    this.gatekeeperNetwork = gatekeeperNetwork;\n    this.owner = owner;\n    this.state = state;\n    this.publicKey = publicKey;\n    this.programId = programId;\n    this.expiryTime = expiryTime;\n  }\n\n  isValid() {\n    return this.state === State.ACTIVE && !this.hasExpired();\n  }\n\n  hasExpired() {\n    const now = Math.floor(Date.now() / 1000);\n    return !!this.expiryTime && now > this.expiryTime;\n  }\n\n  static fromAccount(accountInfo, key) {\n    const parsedData = GatewayTokenData_1.GatewayTokenData.fromAccount(accountInfo.data);\n    return (0, util_1.dataToGatewayToken)(parsedData, key);\n  }\n\n  update(_ref) {\n    let {\n      state,\n      expiryTime\n    } = _ref;\n    return new GatewayToken(this.issuingGatekeeper, this.gatekeeperNetwork, this.owner, state, this.publicKey, this.programId, expiryTime || this.expiryTime);\n  }\n\n}\n\nexports.GatewayToken = GatewayToken;","map":{"version":3,"mappings":";;;;;;;AACA;;AACA;;AAMA,IAAYA,KAAZ;;AAAA,WAAYA,KAAZ,EAAiB;AACfA;AACAA;AACAA;AACD,CAJD,EAAYA,KAAK,GAALC,kCAAK,EAAL,CAAZ;;AAKA,MAAaC,YAAb,CAAyB;AACvBC,eACE;AACSC,mBAFX,EAGWC,iBAHX,EAIWC,KAJX,EAKWC,KALX,EAMWC,SANX,EAOWC,SAPX,EAQWC,UARX,EAQ8B;AANnB;AACA;AACA;AACA;AACA;AACA;AACA;AACP;;AAEJC,SAAO;AACL,WAAO,KAAKJ,KAAL,KAAeP,KAAK,CAACY,MAArB,IAA+B,CAAC,KAAKC,UAAL,EAAvC;AACD;;AAEOA,YAAU;AAChB,UAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACH,GAAL,KAAa,IAAxB,CAAZ;AACA,WAAO,CAAC,CAAC,KAAKJ,UAAP,IAAqBI,GAAG,GAAG,KAAKJ,UAAvC;AACD;;AAEiB,SAAXQ,WAAW,CAChBC,WADgB,EAEhBC,GAFgB,EAEF;AAEd,UAAMC,UAAU,GAAGC,oCAAiBJ,WAAjB,CAA6BC,WAAW,CAACI,IAAzC,CAAnB;AACA,WAAO,+BAAmBF,UAAnB,EAA+BD,GAA/B,CAAP;AACD;;AAEMI,QAAM,OAMZ;AAAA,QANa;AACZjB,WADY;AAEZG;AAFY,KAMb;AACC,WAAO,IAAIR,YAAJ,CACL,KAAKE,iBADA,EAEL,KAAKC,iBAFA,EAGL,KAAKC,KAHA,EAILC,KAJK,EAKL,KAAKC,SALA,EAML,KAAKC,SANA,EAOLC,UAAU,IAAI,KAAKA,UAPd,CAAP;AASD;;AA7CsB;;AAAzBT","names":["State","exports","GatewayToken","constructor","issuingGatekeeper","gatekeeperNetwork","owner","state","publicKey","programId","expiryTime","isValid","ACTIVE","hasExpired","now","Math","floor","Date","fromAccount","accountInfo","key","parsedData","GatewayTokenData_1","data","update"],"sourceRoot":"","sources":["../../src/types/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}