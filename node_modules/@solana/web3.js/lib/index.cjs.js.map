{"version":3,"file":"index.cjs.js","sources":["../src/util/to-buffer.js","../src/publickey.js","../src/account.js","../src/timing.js","../src/layout.js","../src/util/shortvec-encoding.js","../src/transaction.js","../src/sysvar.js","../src/nonce-account.js","../src/util/sleep.js","../src/connection.js","../src/util/send-and-confirm-transaction.js","../src/instruction.js","../src/system-program.js","../src/loader.js","../src/bpf-loader.js","../src/budget-program.js","../src/stake-program.js","../src/validator-info.js","../src/vote-account.js","../src/util/send-and-confirm-raw-transaction.js","../src/util/testnet.js","../src/index.js"],"sourcesContent":["// @flow\n\nexport const toBuffer = (arr: Buffer | Uint8Array | Array<number>): Buffer => {\n  if (arr instanceof Buffer) {\n    return arr;\n  } else if (arr instanceof Uint8Array) {\n    return Buffer.from(arr.buffer, arr.byteOffset, arr.byteLength);\n  } else {\n    return Buffer.from(arr);\n  }\n};\n","// @flow\n\nimport BN from 'bn.js';\nimport bs58 from 'bs58';\nimport hasha from 'hasha';\n\n/**\n * A public key\n */\nexport class PublicKey {\n  _bn: BN;\n\n  /**\n   * Create a new PublicKey object\n   */\n  constructor(value: number | string | Buffer | Uint8Array | Array<number>) {\n    if (typeof value === 'string') {\n      // hexadecimal number\n      if (value.startsWith('0x')) {\n        this._bn = new BN(value.substring(2), 16);\n      } else {\n        // assume base 58 encoding by default\n        const decoded = bs58.decode(value);\n        if (decoded.length != 32) {\n          throw new Error(`Invalid public key input`);\n        }\n        this._bn = new BN(decoded);\n      }\n    } else {\n      this._bn = new BN(value);\n    }\n\n    if (this._bn.byteLength() > 32) {\n      throw new Error(`Invalid public key input`);\n    }\n  }\n\n  /**\n   * Checks if the provided object is a PublicKey\n   */\n  static isPublicKey(o: Object): boolean {\n    return o instanceof PublicKey;\n  }\n\n  /**\n   * Checks if two publicKeys are equal\n   */\n  equals(publicKey: PublicKey): boolean {\n    return this._bn.eq(publicKey._bn);\n  }\n\n  /**\n   * Return the base-58 representation of the public key\n   */\n  toBase58(): string {\n    return bs58.encode(this.toBuffer());\n  }\n\n  /**\n   * Return the Buffer representation of the public key\n   */\n  toBuffer(): Buffer {\n    const b = this._bn.toArrayLike(Buffer);\n    if (b.length === 32) {\n      return b;\n    }\n\n    const zeroPad = Buffer.alloc(32);\n    b.copy(zeroPad, 32 - b.length);\n    return zeroPad;\n  }\n\n  /**\n   * Returns a string representation of the public key\n   */\n  toString(): string {\n    return this.toBase58();\n  }\n\n  /**\n   * Derive a public key from another key, a seed, and a programId.\n   */\n  static createWithSeed(\n    fromPublicKey: PublicKey,\n    seed: string,\n    programId: PublicKey,\n  ): PublicKey {\n    const buffer = Buffer.concat([\n      fromPublicKey.toBuffer(),\n      Buffer.from(seed),\n      programId.toBuffer(),\n    ]);\n    const hash = hasha(buffer, {algorithm: 'sha256'});\n    return new PublicKey('0x' + hash);\n  }\n}\n","// @flow\nimport nacl from 'tweetnacl';\nimport type {KeyPair} from 'tweetnacl';\n\nimport {toBuffer} from './util/to-buffer';\nimport {PublicKey} from './publickey';\n\n/**\n * An account key pair (public and secret keys).\n */\nexport class Account {\n  _keypair: KeyPair;\n\n  /**\n   * Create a new Account object\n   *\n   * If the secretKey parameter is not provided a new key pair is randomly\n   * created for the account\n   *\n   * @param secretKey Secret key for the account\n   */\n  constructor(secretKey?: Buffer | Uint8Array | Array<number>) {\n    if (secretKey) {\n      this._keypair = nacl.sign.keyPair.fromSecretKey(toBuffer(secretKey));\n    } else {\n      this._keypair = nacl.sign.keyPair();\n    }\n  }\n\n  /**\n   * The public key for this account\n   */\n  get publicKey(): PublicKey {\n    return new PublicKey(this._keypair.publicKey);\n  }\n\n  /**\n   * The **unencrypted** secret key for this account\n   */\n  get secretKey(): Buffer {\n    return this._keypair.secretKey;\n  }\n}\n","// @flow\n\n// TODO: These constants should be removed in favor of reading them out of a\n// Syscall account\n\n/**\n * @ignore\n */\nexport const NUM_TICKS_PER_SECOND = 10;\n\n/**\n * @ignore\n */\nexport const DEFAULT_TICKS_PER_SLOT = 8;\n","// @flow\n\nimport * as BufferLayout from 'buffer-layout';\n\n/**\n * Layout for a public key\n */\nexport const publicKey = (property: string = 'publicKey'): Object => {\n  return BufferLayout.blob(32, property);\n};\n\n/**\n * Layout for a 64bit unsigned value\n */\nexport const uint64 = (property: string = 'uint64'): Object => {\n  return BufferLayout.blob(8, property);\n};\n\n/**\n * Layout for a Rust String type\n */\nexport const rustString = (property: string = 'string') => {\n  const rsl = BufferLayout.struct(\n    [\n      BufferLayout.u32('length'),\n      BufferLayout.u32('lengthPadding'),\n      BufferLayout.blob(BufferLayout.offset(BufferLayout.u32(), -8), 'chars'),\n    ],\n    property,\n  );\n  const _decode = rsl.decode.bind(rsl);\n  const _encode = rsl.encode.bind(rsl);\n\n  rsl.decode = (buffer, offset) => {\n    const data = _decode(buffer, offset);\n    return data.chars.toString('utf8');\n  };\n\n  rsl.encode = (str, buffer, offset) => {\n    const data = {\n      chars: Buffer.from(str, 'utf8'),\n    };\n    return _encode(data, buffer, offset);\n  };\n\n  rsl.alloc = str => {\n    return (\n      BufferLayout.u32().span +\n      BufferLayout.u32().span +\n      Buffer.from(str, 'utf8').length\n    );\n  };\n\n  return rsl;\n};\n\n/**\n * Layout for an Authorized object\n */\nexport const authorized = (property: string = 'authorized') => {\n  return BufferLayout.struct(\n    [publicKey('staker'), publicKey('withdrawer')],\n    property,\n  );\n};\n\n/**\n * Layout for a Lockup object\n */\nexport const lockup = (property: string = 'lockup') => {\n  return BufferLayout.struct(\n    [\n      BufferLayout.ns64('unixTimestamp'),\n      BufferLayout.ns64('epoch'),\n      publicKey('custodian'),\n    ],\n    property,\n  );\n};\n\nexport function getAlloc(type: Object, fields: Object): number {\n  let alloc = 0;\n  type.layout.fields.forEach(item => {\n    if (item.span >= 0) {\n      alloc += item.span;\n    } else if (typeof item.alloc === 'function') {\n      alloc += item.alloc(fields[item.property]);\n    }\n  });\n  return alloc;\n}\n","// @flow\n\nexport function decodeLength(bytes: Array<number>): number {\n  let len = 0;\n  let size = 0;\n  for (;;) {\n    let elem = bytes.shift();\n    len |= (elem & 0x7f) << (size * 7);\n    size += 1;\n    if ((elem & 0x80) === 0) {\n      break;\n    }\n  }\n  return len;\n}\n\nexport function encodeLength(bytes: Array<number>, len: number) {\n  let rem_len = len;\n  for (;;) {\n    let elem = rem_len & 0x7f;\n    rem_len >>= 7;\n    if (rem_len == 0) {\n      bytes.push(elem);\n      break;\n    } else {\n      elem |= 0x80;\n      bytes.push(elem);\n    }\n  }\n}\n","// @flow\n\nimport invariant from 'assert';\nimport * as BufferLayout from 'buffer-layout';\nimport nacl from 'tweetnacl';\nimport bs58 from 'bs58';\n\nimport * as Layout from './layout';\nimport {PublicKey} from './publickey';\nimport {Account} from './account';\nimport * as shortvec from './util/shortvec-encoding';\nimport type {Blockhash} from './blockhash';\n\n/**\n * @typedef {string} TransactionSignature\n */\nexport type TransactionSignature = string;\n\n/**\n * Default (empty) signature\n *\n * Signatures are 64 bytes in length\n */\nconst DEFAULT_SIGNATURE = Buffer.alloc(64).fill(0);\n\n/**\n * Maximum over-the-wire size of a Transaction\n *\n * 1280 is IPv6 minimum MTU\n * 40 bytes is the size of the IPv6 header\n * 8 bytes is the size of the fragment header\n */\nexport const PACKET_DATA_SIZE = 1280 - 40 - 8;\n\nconst PUBKEY_LENGTH = 32;\nconst SIGNATURE_LENGTH = 64;\n\n/**\n * List of TransactionInstruction object fields that may be initialized at construction\n *\n * @typedef {Object} TransactionInstructionCtorFields\n * @property {?Array<PublicKey>} keys\n * @property {?PublicKey} programId\n * @property {?Buffer} data\n */\nexport type TransactionInstructionCtorFields = {|\n  keys?: Array<{pubkey: PublicKey, isSigner: boolean, isWritable: boolean}>,\n  programId?: PublicKey,\n  data?: Buffer,\n|};\n\n/**\n * Transaction Instruction class\n */\nexport class TransactionInstruction {\n  /**\n   * Public keys to include in this transaction\n   * Boolean represents whether this pubkey needs to sign the transaction\n   */\n  keys: Array<{\n    pubkey: PublicKey,\n    isSigner: boolean,\n    isWritable: boolean,\n  }> = [];\n\n  /**\n   * Program Id to execute\n   */\n  programId: PublicKey;\n\n  /**\n   * Program input\n   */\n  data: Buffer = Buffer.alloc(0);\n\n  constructor(opts?: TransactionInstructionCtorFields) {\n    opts && Object.assign(this, opts);\n  }\n}\n\n/**\n * @private\n */\ntype SignaturePubkeyPair = {|\n  signature: Buffer | null,\n  publicKey: PublicKey,\n|};\n\n/**\n * List of Transaction object fields that may be initialized at construction\n *\n * @typedef {Object} TransactionCtorFields\n * @property (?recentBlockhash} A recent block hash\n * @property (?signatures} One or more signatures\n *\n */\ntype TransactionCtorFields = {|\n  recentBlockhash?: Blockhash | null,\n  nonceInfo?: NonceInformation | null,\n  signatures?: Array<SignaturePubkeyPair>,\n|};\n\n/**\n * NonceInformation to be used to build a Transaction.\n *\n * @typedef {Object} NonceInformation\n * @property {nonce} The current Nonce blockhash\n * @property {nonceInstruction} The AdvanceNonceAccount Instruction\n */\ntype NonceInformation = {|\n  nonce: Blockhash,\n  nonceInstruction: TransactionInstruction,\n|};\n\n/**\n * Transaction class\n */\nexport class Transaction {\n  /**\n   * Signatures for the transaction.  Typically created by invoking the\n   * `sign()` method\n   */\n  signatures: Array<SignaturePubkeyPair> = [];\n\n  /**\n   * The first (payer) Transaction signature\n   */\n  get signature(): Buffer | null {\n    if (this.signatures.length > 0) {\n      return this.signatures[0].signature;\n    }\n    return null;\n  }\n\n  /**\n   * The instructions to atomically execute\n   */\n  instructions: Array<TransactionInstruction> = [];\n\n  /**\n   * A recent transaction id.  Must be populated by the caller\n   */\n  recentBlockhash: Blockhash | null;\n\n  /**\n   * Optional Nonce information. If populated, transaction will use a durable\n   * Nonce hash instead of a recentBlockhash. Must be populated by the caller\n   */\n  nonceInfo: NonceInformation | null;\n\n  /**\n   * Construct an empty Transaction\n   */\n  constructor(opts?: TransactionCtorFields) {\n    opts && Object.assign(this, opts);\n  }\n\n  /**\n   * Add one or more instructions to this Transaction\n   */\n  add(\n    ...items: Array<\n      Transaction | TransactionInstruction | TransactionInstructionCtorFields,\n    >\n  ): Transaction {\n    if (items.length === 0) {\n      throw new Error('No instructions');\n    }\n\n    items.forEach(item => {\n      if (item instanceof Transaction) {\n        this.instructions = this.instructions.concat(item.instructions);\n      } else if (item instanceof TransactionInstruction) {\n        this.instructions.push(item);\n      } else {\n        this.instructions.push(new TransactionInstruction(item));\n      }\n    });\n    return this;\n  }\n\n  /**\n   * @private\n   */\n  _getSignData(): Buffer {\n    const {nonceInfo} = this;\n    if (nonceInfo && this.instructions[0] != nonceInfo.nonceInstruction) {\n      this.recentBlockhash = nonceInfo.nonce;\n      this.instructions.unshift(nonceInfo.nonceInstruction);\n    }\n    const {recentBlockhash} = this;\n    if (!recentBlockhash) {\n      throw new Error('Transaction recentBlockhash required');\n    }\n\n    if (this.instructions.length < 1) {\n      throw new Error('No instructions provided');\n    }\n\n    const keys = this.signatures.map(({publicKey}) => publicKey.toString());\n    let numReadonlySignedAccounts = 0;\n    let numReadonlyUnsignedAccounts = 0;\n\n    const programIds = [];\n\n    const allKeys = [];\n    this.instructions.forEach(instruction => {\n      instruction.keys.forEach(keySignerPair => {\n        allKeys.push(keySignerPair);\n      });\n\n      const programId = instruction.programId.toString();\n      if (!programIds.includes(programId)) {\n        programIds.push(programId);\n      }\n    });\n\n    allKeys.sort(function(x, y) {\n      const checkSigner = x.isSigner === y.isSigner ? 0 : x.isSigner ? -1 : 1;\n      const checkWritable =\n        x.isWritable === y.isWritable ? 0 : x.isWritable ? -1 : 1;\n      return checkSigner || checkWritable;\n    });\n\n    allKeys.forEach(keySignerPair => {\n      const keyStr = keySignerPair.pubkey.toString();\n      if (!keys.includes(keyStr)) {\n        if (keySignerPair.isSigner) {\n          this.signatures.push({\n            signature: null,\n            publicKey: keySignerPair.pubkey,\n          });\n          if (!keySignerPair.isWritable) {\n            numReadonlySignedAccounts += 1;\n          }\n        } else {\n          if (!keySignerPair.isWritable) {\n            numReadonlyUnsignedAccounts += 1;\n          }\n        }\n        keys.push(keyStr);\n      }\n    });\n\n    programIds.forEach(programId => {\n      if (!keys.includes(programId)) {\n        keys.push(programId);\n        numReadonlyUnsignedAccounts += 1;\n      }\n    });\n\n    let keyCount = [];\n    shortvec.encodeLength(keyCount, keys.length);\n\n    const instructions = this.instructions.map(instruction => {\n      const {data, programId} = instruction;\n      let keyIndicesCount = [];\n      shortvec.encodeLength(keyIndicesCount, instruction.keys.length);\n      let dataCount = [];\n      shortvec.encodeLength(dataCount, instruction.data.length);\n      return {\n        programIdIndex: keys.indexOf(programId.toString()),\n        keyIndicesCount: Buffer.from(keyIndicesCount),\n        keyIndices: Buffer.from(\n          instruction.keys.map(keyObj =>\n            keys.indexOf(keyObj.pubkey.toString()),\n          ),\n        ),\n        dataLength: Buffer.from(dataCount),\n        data,\n      };\n    });\n\n    instructions.forEach(instruction => {\n      invariant(instruction.programIdIndex >= 0);\n      instruction.keyIndices.forEach(keyIndex => invariant(keyIndex >= 0));\n    });\n\n    let instructionCount = [];\n    shortvec.encodeLength(instructionCount, instructions.length);\n    let instructionBuffer = Buffer.alloc(PACKET_DATA_SIZE);\n    Buffer.from(instructionCount).copy(instructionBuffer);\n    let instructionBufferLength = instructionCount.length;\n\n    instructions.forEach(instruction => {\n      const instructionLayout = BufferLayout.struct([\n        BufferLayout.u8('programIdIndex'),\n\n        BufferLayout.blob(\n          instruction.keyIndicesCount.length,\n          'keyIndicesCount',\n        ),\n        BufferLayout.seq(\n          BufferLayout.u8('keyIndex'),\n          instruction.keyIndices.length,\n          'keyIndices',\n        ),\n        BufferLayout.blob(instruction.dataLength.length, 'dataLength'),\n        BufferLayout.seq(\n          BufferLayout.u8('userdatum'),\n          instruction.data.length,\n          'data',\n        ),\n      ]);\n      const length = instructionLayout.encode(\n        instruction,\n        instructionBuffer,\n        instructionBufferLength,\n      );\n      instructionBufferLength += length;\n    });\n    instructionBuffer = instructionBuffer.slice(0, instructionBufferLength);\n\n    const signDataLayout = BufferLayout.struct([\n      BufferLayout.blob(1, 'numRequiredSignatures'),\n      BufferLayout.blob(1, 'numReadonlySignedAccounts'),\n      BufferLayout.blob(1, 'numReadonlyUnsignedAccounts'),\n      BufferLayout.blob(keyCount.length, 'keyCount'),\n      BufferLayout.seq(Layout.publicKey('key'), keys.length, 'keys'),\n      Layout.publicKey('recentBlockhash'),\n    ]);\n\n    const transaction = {\n      numRequiredSignatures: Buffer.from([this.signatures.length]),\n      numReadonlySignedAccounts: Buffer.from([numReadonlySignedAccounts]),\n      numReadonlyUnsignedAccounts: Buffer.from([numReadonlyUnsignedAccounts]),\n      keyCount: Buffer.from(keyCount),\n      keys: keys.map(key => new PublicKey(key).toBuffer()),\n      recentBlockhash: Buffer.from(bs58.decode(recentBlockhash)),\n    };\n\n    let signData = Buffer.alloc(2048);\n    const length = signDataLayout.encode(transaction, signData);\n    instructionBuffer.copy(signData, length);\n    signData = signData.slice(0, length + instructionBuffer.length);\n\n    return signData;\n  }\n\n  /**\n   * Sign the Transaction with the specified accounts.  Multiple signatures may\n   * be applied to a Transaction. The first signature is considered \"primary\"\n   * and is used when testing for Transaction confirmation.\n   *\n   * Transaction fields should not be modified after the first call to `sign`,\n   * as doing so may invalidate the signature and cause the Transaction to be\n   * rejected.\n   *\n   * The Transaction must be assigned a valid `recentBlockhash` before invoking this method\n   */\n  sign(...signers: Array<Account>) {\n    this.signPartial(...signers);\n  }\n\n  /**\n   * Partially sign a Transaction with the specified accounts.  The `Account`\n   * inputs will be used to sign the Transaction immediately, while any\n   * `PublicKey` inputs will be referenced in the signed Transaction but need to\n   * be filled in later by calling `addSigner()` with the matching `Account`.\n   *\n   * All the caveats from the `sign` method apply to `signPartial`\n   */\n  signPartial(...partialSigners: Array<PublicKey | Account>) {\n    if (partialSigners.length === 0) {\n      throw new Error('No signers');\n    }\n    const signatures: Array<SignaturePubkeyPair> = partialSigners.map(\n      accountOrPublicKey => {\n        const publicKey =\n          accountOrPublicKey instanceof Account\n            ? accountOrPublicKey.publicKey\n            : accountOrPublicKey;\n        return {\n          signature: null,\n          publicKey,\n        };\n      },\n    );\n    this.signatures = signatures;\n    const signData = this._getSignData();\n\n    partialSigners.forEach((accountOrPublicKey, index) => {\n      if (accountOrPublicKey instanceof PublicKey) {\n        return;\n      }\n      const signature = nacl.sign.detached(\n        signData,\n        accountOrPublicKey.secretKey,\n      );\n      invariant(signature.length === 64);\n      signatures[index].signature = Buffer.from(signature);\n    });\n  }\n\n  /**\n   * Fill in a signature for a partially signed Transaction.  The `signer` must\n   * be the corresponding `Account` for a `PublicKey` that was previously provided to\n   * `signPartial`\n   */\n  addSigner(signer: Account) {\n    const index = this.signatures.findIndex(sigpair =>\n      signer.publicKey.equals(sigpair.publicKey),\n    );\n    if (index < 0) {\n      throw new Error(`Unknown signer: ${signer.publicKey.toString()}`);\n    }\n\n    const signData = this._getSignData();\n    const signature = nacl.sign.detached(signData, signer.secretKey);\n    invariant(signature.length === 64);\n    this.signatures[index].signature = Buffer.from(signature);\n  }\n\n  /**\n   * Serialize the Transaction in the wire format.\n   *\n   * The Transaction must have a valid `signature` before invoking this method\n   */\n  serialize(): Buffer {\n    const {signatures} = this;\n    if (!signatures) {\n      throw new Error('Transaction has not been signed');\n    }\n\n    const signData = this._getSignData();\n    const signatureCount = [];\n    shortvec.encodeLength(signatureCount, signatures.length);\n    const transactionLength =\n      signatureCount.length + signatures.length * 64 + signData.length;\n    const wireTransaction = Buffer.alloc(transactionLength);\n    invariant(signatures.length < 256);\n    Buffer.from(signatureCount).copy(wireTransaction, 0);\n    signatures.forEach(({signature}, index) => {\n      if (signature !== null) {\n        invariant(signature.length === 64, `signature has invalid length`);\n        Buffer.from(signature).copy(\n          wireTransaction,\n          signatureCount.length + index * 64,\n        );\n      }\n    });\n    signData.copy(\n      wireTransaction,\n      signatureCount.length + signatures.length * 64,\n    );\n    invariant(\n      wireTransaction.length <= PACKET_DATA_SIZE,\n      `Transaction too large: ${wireTransaction.length} > ${PACKET_DATA_SIZE}`,\n    );\n    return wireTransaction;\n  }\n\n  /**\n   * Deprecated method\n   * @private\n   */\n  get keys(): Array<PublicKey> {\n    invariant(this.instructions.length === 1);\n    return this.instructions[0].keys.map(keyObj => keyObj.pubkey);\n  }\n\n  /**\n   * Deprecated method\n   * @private\n   */\n  get programId(): PublicKey {\n    invariant(this.instructions.length === 1);\n    return this.instructions[0].programId;\n  }\n\n  /**\n   * Deprecated method\n   * @private\n   */\n  get data(): Buffer {\n    invariant(this.instructions.length === 1);\n    return this.instructions[0].data;\n  }\n\n  /**\n   * Parse a wire transaction into a Transaction object.\n   */\n  static from(buffer: Buffer | Uint8Array | Array<number>): Transaction {\n    // Slice up wire data\n    let byteArray = [...buffer];\n\n    const signatureCount = shortvec.decodeLength(byteArray);\n    let signatures = [];\n    for (let i = 0; i < signatureCount; i++) {\n      const signature = byteArray.slice(0, SIGNATURE_LENGTH);\n      byteArray = byteArray.slice(SIGNATURE_LENGTH);\n      signatures.push(bs58.encode(Buffer.from(signature)));\n    }\n\n    const numRequiredSignatures = byteArray.shift();\n    // byteArray = byteArray.slice(1); // Skip numRequiredSignatures byte\n    const numReadonlySignedAccounts = byteArray.shift();\n    // byteArray = byteArray.slice(1); // Skip numReadonlySignedAccounts byte\n    const numReadonlyUnsignedAccounts = byteArray.shift();\n    // byteArray = byteArray.slice(1); // Skip numReadonlyUnsignedAccounts byte\n\n    const accountCount = shortvec.decodeLength(byteArray);\n    let accounts = [];\n    for (let i = 0; i < accountCount; i++) {\n      const account = byteArray.slice(0, PUBKEY_LENGTH);\n      byteArray = byteArray.slice(PUBKEY_LENGTH);\n      accounts.push(bs58.encode(Buffer.from(account)));\n    }\n\n    const recentBlockhash = byteArray.slice(0, PUBKEY_LENGTH);\n    byteArray = byteArray.slice(PUBKEY_LENGTH);\n\n    const instructionCount = shortvec.decodeLength(byteArray);\n    let instructions = [];\n    for (let i = 0; i < instructionCount; i++) {\n      let instruction = {};\n      instruction.programIndex = byteArray.shift();\n      const accountCount = shortvec.decodeLength(byteArray);\n      instruction.accounts = byteArray.slice(0, accountCount);\n      byteArray = byteArray.slice(accountCount);\n      const dataLength = shortvec.decodeLength(byteArray);\n      const data = byteArray.slice(0, dataLength);\n      instruction.data = bs58.encode(Buffer.from(data));\n      byteArray = byteArray.slice(dataLength);\n      instructions.push(instruction);\n    }\n\n    return Transaction._populate(\n      signatures,\n      accounts,\n      instructions,\n      recentBlockhash,\n      numRequiredSignatures,\n      numReadonlySignedAccounts,\n      numReadonlyUnsignedAccounts,\n    );\n  }\n\n  /**\n   * Parse an RPC result into a Transaction object.\n   */\n  static fromRpcResult(rpcResult: any): Transaction {\n    const signatures = rpcResult.signatures;\n    const accounts = rpcResult.message.accountKeys;\n    const instructions = rpcResult.message.instructions;\n    const recentBlockhash = rpcResult.message.recentBlockhash;\n    const numRequiredSignatures =\n      rpcResult.message.header.numRequiredSignatures;\n    const numReadonlySignedAccounts =\n      rpcResult.message.header.numReadonlySignedAccounts;\n    const numReadonlyUnsignedAccounts =\n      rpcResult.message.header.numReadonlyUnsignedAccounts;\n    return Transaction._populate(\n      signatures,\n      accounts,\n      instructions,\n      recentBlockhash,\n      numRequiredSignatures,\n      numReadonlySignedAccounts,\n      numReadonlyUnsignedAccounts,\n    );\n  }\n\n  /**\n   * Populate Transaction object\n   * @private\n   */\n  static _populate(\n    signatures: Array<string>,\n    accounts: Array<string>,\n    instructions: Array<any>,\n    recentBlockhash: Array<number>,\n    numRequiredSignatures: number,\n    numReadonlySignedAccounts: number,\n    numReadonlyUnsignedAccounts: number,\n  ): Transaction {\n    function isWritable(\n      i: number,\n      numRequiredSignatures: number,\n      numReadonlySignedAccounts: number,\n      numReadonlyUnsignedAccounts: number,\n      numKeys: number,\n    ): boolean {\n      return (\n        i < numRequiredSignatures - numReadonlySignedAccounts ||\n        (i >= numRequiredSignatures &&\n          i < numKeys - numReadonlyUnsignedAccounts)\n      );\n    }\n\n    const transaction = new Transaction();\n    transaction.recentBlockhash = new PublicKey(recentBlockhash).toBase58();\n    for (let i = 0; i < signatures.length; i++) {\n      const sigPubkeyPair = {\n        signature:\n          signatures[i] == bs58.encode(DEFAULT_SIGNATURE)\n            ? null\n            : bs58.decode(signatures[i]),\n        publicKey: new PublicKey(accounts[i]),\n      };\n      transaction.signatures.push(sigPubkeyPair);\n    }\n    for (let i = 0; i < instructions.length; i++) {\n      let instructionData = {\n        keys: [],\n        programId: new PublicKey(accounts[instructions[i].programIndex]),\n        data: bs58.decode(instructions[i].data),\n      };\n      for (let j = 0; j < instructions[i].accounts.length; j++) {\n        const pubkey = new PublicKey(accounts[instructions[i].accounts[j]]);\n\n        instructionData.keys.push({\n          pubkey,\n          isSigner: transaction.signatures.some(\n            keyObj => keyObj.publicKey.toString() === pubkey.toString(),\n          ),\n          isWritable: isWritable(\n            j,\n            numRequiredSignatures,\n            numReadonlySignedAccounts,\n            numReadonlyUnsignedAccounts,\n            accounts.length,\n          ),\n        });\n      }\n      let instruction = new TransactionInstruction(instructionData);\n      transaction.instructions.push(instruction);\n    }\n    return transaction;\n  }\n}\n","// @flow\nimport {PublicKey} from './publickey';\n\nexport const SYSVAR_CLOCK_PUBKEY = new PublicKey(\n  'SysvarC1ock11111111111111111111111111111111',\n);\n\nexport const SYSVAR_RECENT_BLOCKHASHES_PUBKEY = new PublicKey(\n  'SysvarRecentB1ockHashes11111111111111111111',\n);\n\nexport const SYSVAR_RENT_PUBKEY = new PublicKey(\n  'SysvarRent111111111111111111111111111111111',\n);\n\nexport const SYSVAR_REWARDS_PUBKEY = new PublicKey(\n  'SysvarRewards111111111111111111111111111111',\n);\n\nexport const SYSVAR_STAKE_HISTORY_PUBKEY = new PublicKey(\n  'SysvarStakeHistory1111111111111111111111111',\n);\n","// @flow\nimport * as BufferLayout from 'buffer-layout';\n\nimport type {Blockhash} from './blockhash';\nimport * as Layout from './layout';\nimport {PublicKey} from './publickey';\n\n/**\n * See https://github.com/solana-labs/solana/blob/0ea2843ec9cdc517572b8e62c959f41b55cf4453/sdk/src/nonce_state.rs#L29-L32\n *\n * @private\n */\nconst NonceAccountLayout = BufferLayout.struct([\n  BufferLayout.u32('state'),\n  Layout.publicKey('authorizedPubkey'),\n  Layout.publicKey('nonce'),\n]);\n\n/**\n * NonceAccount class\n */\nexport class NonceAccount {\n  authorizedPubkey: PublicKey;\n  nonce: Blockhash;\n\n  /**\n   * Deserialize NonceAccount from the account data.\n   *\n   * @param buffer account data\n   * @return NonceAccount\n   */\n  static fromAccountData(buffer: Buffer): NonceAccount {\n    const nonceAccount = NonceAccountLayout.decode(buffer, 0);\n    nonceAccount.authorizedPubkey = new PublicKey(\n      nonceAccount.authorizedPubkey,\n    );\n    nonceAccount.nonce = new PublicKey(nonceAccount.nonce).toString();\n    return nonceAccount;\n  }\n}\n","// @flow\n\n// zzz\nexport function sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n","// @flow\n\nimport assert from 'assert';\nimport bs58 from 'bs58';\nimport {parse as urlParse, format as urlFormat} from 'url';\nimport fetch from 'node-fetch';\nimport jayson from 'jayson/lib/client/browser';\nimport {struct} from 'superstruct';\nimport {Client as RpcWebSocketClient} from 'rpc-websockets';\n\nimport {NonceAccount} from './nonce-account';\nimport {PublicKey} from './publickey';\nimport {DEFAULT_TICKS_PER_SLOT, NUM_TICKS_PER_SECOND} from './timing';\nimport {Transaction} from './transaction';\nimport {sleep} from './util/sleep';\nimport {toBuffer} from './util/to-buffer';\nimport type {Blockhash} from './blockhash';\nimport type {FeeCalculator} from './fee-calculator';\nimport type {Account} from './account';\nimport type {TransactionSignature} from './transaction';\n\ntype RpcRequest = (methodName: string, args: Array<any>) => any;\n\ntype RpcResponseAndContext<T> = {\n  context: {\n    slot: number,\n  },\n  value: T,\n};\n\n/**\n * @private\n */\nfunction jsonRpcResultAndContext(resultDescription: any) {\n  return jsonRpcResult({\n    context: struct({\n      slot: 'number',\n    }),\n    value: resultDescription,\n  });\n}\n\n/**\n * @private\n */\nfunction jsonRpcResult(resultDescription: any) {\n  const jsonRpcVersion = struct.literal('2.0');\n  return struct.union([\n    struct({\n      jsonrpc: jsonRpcVersion,\n      id: 'string',\n      error: 'any',\n    }),\n    struct({\n      jsonrpc: jsonRpcVersion,\n      id: 'string',\n      error: 'null?',\n      result: resultDescription,\n    }),\n  ]);\n}\n\n/**\n * The level of commitment desired when querying state\n *   'max':    Query the most recent block which has reached max voter lockout\n *   'recent': Query the most recent block\n *\n * @typedef {'max' | 'recent'} Commitment\n */\nexport type Commitment = 'max' | 'recent';\n\n/**\n * Information describing a cluster node\n *\n * @typedef {Object} ContactInfo\n * @property {string} pubkey Identity public key of the node\n * @property {string} gossip Gossip network address for the node\n * @property {string} tpu TPU network address for the node (null if not available)\n * @property {string|null} rpc JSON RPC network address for the node (null if not available)\n */\ntype ContactInfo = {\n  pubkey: string,\n  gossip: string,\n  tpu: string | null,\n  rpc: string | null,\n};\n\n/**\n * Information describing a vote account\n *\n * @typedef {Object} VoteAccountInfo\n * @property {string} votePubkey Public key of the vote account\n * @property {string} nodePubkey Identity public key of the node voting with this account\n * @property {number} activatedStake The stake, in lamports, delegated to this vote account and activated\n * @property {boolean} epochVoteAccount Whether the vote account is staked for this epoch\n * @property {Array<Array<number>>} epochCredits Recent epoch voting credit history for this voter\n * @property {number} commission A percentage (0-100) of rewards payout owed to the voter\n * @property {number} lastVote Most recent slot voted on by this vote account\n */\ntype VoteAccountInfo = {\n  votePubkey: string,\n  nodePubkey: string,\n  activatedStake: number,\n  epochVoteAccount: boolean,\n  epochCredits: Array<[number, number, number]>,\n  commission: number,\n  lastVote: number,\n};\n\n/**\n * A collection of cluster vote accounts\n *\n * @typedef {Object} VoteAccountStatus\n * @property {Array<VoteAccountInfo>} current Active vote accounts\n * @property {Array<VoteAccountInfo>} delinquent Inactive vote accounts\n */\ntype VoteAccountStatus = {\n  current: Array<VoteAccountInfo>,\n  delinquent: Array<VoteAccountInfo>,\n};\n\n/**\n * Network Inflation parameters\n * (see https://docs.solana.com/book/v/master/implemented-proposals/ed_overview)\n *\n * @typedef {Object} Inflation\n * @property {number} foundation\n * @property {number} foundation_term\n * @property {number} initial\n * @property {number} storage\n * @property {number} taper\n * @property {number} terminal\n */\nconst GetInflationResult = struct({\n  foundation: 'number',\n  foundationTerm: 'number',\n  initial: 'number',\n  storage: 'number',\n  taper: 'number',\n  terminal: 'number',\n});\n\n/**\n * EpochInfo parameters\n * (see https://docs.solana.com/book/v/master/terminology#epoch)\n *\n * @typedef {Object} EpochInfo\n * @property {number} epoch\n * @property {number} slotIndex\n * @property {number} slotsInEpoch\n * @property {number} absoluteSlot\n */\nconst GetEpochInfoResult = struct({\n  epoch: 'number',\n  slotIndex: 'number',\n  slotsInEpoch: 'number',\n  absoluteSlot: 'number',\n});\n\n/**\n * EpochSchedule parameters\n * (see https://docs.solana.com/book/v/master/terminology#epoch)\n *\n * @typedef {Object} EpochSchedule\n * @property {number} slots_per_epoch\n * @property {number} leader_schedule_slot_offset\n * @property {boolean} warmup\n * @property {number} first_normal_epoch\n * @property {number} first_normal_slot\n */\nconst GetEpochScheduleResult = struct({\n  slotsPerEpoch: 'number',\n  leaderScheduleSlotOffset: 'number',\n  warmup: 'boolean',\n  firstNormalEpoch: 'number',\n  firstNormalSlot: 'number',\n});\n\n/**\n * Signature status for a transaction\n */\nconst SignatureStatusResult = struct.union([\n  struct({Ok: 'null'}),\n  struct({Err: 'object'}),\n]);\n\n/**\n * Version info for a node\n *\n * @typedef {Object} Version\n * @property {string} solana-core Version of solana-core\n */\nconst Version = struct({\n  'solana-core': 'string',\n});\n\n/**\n * A ConfirmedBlock on the ledger\n *\n * @typedef {Object} ConfirmedBlock\n * @property {Blockhash} blockhash Blockhash of this block\n * @property {Blockhash} previousBlockhash Blockhash of this block's parent\n * @property {number} parentSlot Slot index of this block's parent\n * @property {Array<object>} transactions Vector of transactions and status metas\n * @property {Array<object>} rewards Vector of block rewards\n */\ntype ConfirmedBlock = {\n  blockhash: Blockhash,\n  previousBlockhash: Blockhash,\n  parentSlot: number,\n  transactions: Array<{\n    transaction: Transaction,\n    meta: {\n      fee: number,\n      preBalances: Array<number>,\n      postBalances: Array<number>,\n      status?: SignatureStatusResult,\n    },\n  }>,\n  rewards: Array<{\n    pubkey: string,\n    lamports: number,\n  }>,\n};\n\nfunction createRpcRequest(url): RpcRequest {\n  const server = jayson(async (request, callback) => {\n    const options = {\n      method: 'POST',\n      body: request,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    };\n\n    try {\n      const res = await fetch(url, options);\n      const text = await res.text();\n      callback(null, text);\n    } catch (err) {\n      callback(err);\n    }\n  });\n\n  return (method, args) => {\n    return new Promise((resolve, reject) => {\n      server.request(method, args, (err, response) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n        resolve(response);\n      });\n    });\n  };\n}\n\n/**\n * Expected JSON RPC response for the \"getInflation\" message\n */\nconst GetInflationRpcResult = struct({\n  jsonrpc: struct.literal('2.0'),\n  id: 'string',\n  error: 'any?',\n  result: GetInflationResult,\n});\n\n/**\n * Expected JSON RPC response for the \"getEpochInfo\" message\n */\nconst GetEpochInfoRpcResult = struct({\n  jsonrpc: struct.literal('2.0'),\n  id: 'string',\n  error: 'any?',\n  result: GetEpochInfoResult,\n});\n\n/**\n * Expected JSON RPC response for the \"getEpochSchedule\" message\n */\nconst GetEpochScheduleRpcResult = struct({\n  jsonrpc: struct.literal('2.0'),\n  id: 'string',\n  error: 'any?',\n  result: GetEpochScheduleResult,\n});\n\n/**\n * Expected JSON RPC response for the \"getBalance\" message\n */\nconst GetBalanceAndContextRpcResult = jsonRpcResultAndContext('number?');\n\n/**\n * Expected JSON RPC response for the \"getVersion\" message\n */\nconst GetVersionRpcResult = struct({\n  jsonrpc: struct.literal('2.0'),\n  id: 'string',\n  error: 'any?',\n  result: Version,\n});\n\n/**\n * @private\n */\nconst AccountInfoResult = struct({\n  executable: 'boolean',\n  owner: 'string',\n  lamports: 'number',\n  data: 'string',\n  rentEpoch: 'number?',\n});\n\n/**\n * Expected JSON RPC response for the \"getAccountInfo\" message\n */\nconst GetAccountInfoAndContextRpcResult = jsonRpcResultAndContext(\n  struct.union(['null', AccountInfoResult]),\n);\n\n/***\n * Expected JSON RPC response for the \"accountNotification\" message\n */\nconst AccountNotificationResult = struct({\n  subscription: 'number',\n  result: AccountInfoResult,\n});\n\n/**\n * @private\n */\nconst ProgramAccountInfoResult = struct({\n  pubkey: 'string',\n  account: AccountInfoResult,\n});\n\n/***\n * Expected JSON RPC response for the \"programNotification\" message\n */\nconst ProgramAccountNotificationResult = struct({\n  subscription: 'number',\n  result: ProgramAccountInfoResult,\n});\n\n/**\n * @private\n */\nconst SlotInfo = struct({\n  parent: 'number',\n  slot: 'number',\n  root: 'number',\n});\n\n/**\n * Expected JSON RPC response for the \"slotNotification\" message\n */\nconst SlotNotificationResult = struct({\n  subscription: 'number',\n  result: SlotInfo,\n});\n\n/**\n * Expected JSON RPC response for the \"signatureNotification\" message\n */\nconst SignatureNotificationResult = struct({\n  subscription: 'number',\n  result: SignatureStatusResult,\n});\n\n/**\n * Expected JSON RPC response for the \"getProgramAccounts\" message\n */\nconst GetProgramAccountsRpcResult = jsonRpcResult(\n  struct.array([ProgramAccountInfoResult]),\n);\n\n/**\n * Expected JSON RPC response for the \"confirmTransaction\" message\n */\nconst ConfirmTransactionAndContextRpcResult = jsonRpcResultAndContext(\n  'boolean',\n);\n\n/**\n * Expected JSON RPC response for the \"getSlot\" message\n */\nconst GetSlot = jsonRpcResult('number');\n\n/**\n * Expected JSON RPC response for the \"getSlotLeader\" message\n */\nconst GetSlotLeader = jsonRpcResult('string');\n\n/**\n * Expected JSON RPC response for the \"getClusterNodes\" message\n */\nconst GetClusterNodes = jsonRpcResult(\n  struct.array([\n    struct({\n      pubkey: 'string',\n      gossip: 'string',\n      tpu: struct.union(['null', 'string']),\n      rpc: struct.union(['null', 'string']),\n    }),\n  ]),\n);\n\n/**\n * Expected JSON RPC response for the \"getVoteAccounts\" message\n */\nconst GetVoteAccounts = jsonRpcResult(\n  struct({\n    current: struct.array([\n      struct({\n        votePubkey: 'string',\n        nodePubkey: 'string',\n        activatedStake: 'number',\n        epochVoteAccount: 'boolean',\n        epochCredits: struct.array([\n          struct.tuple(['number', 'number', 'number']),\n        ]),\n        commission: 'number',\n        lastVote: 'number',\n        rootSlot: 'number?',\n      }),\n    ]),\n    delinquent: struct.array([\n      struct({\n        votePubkey: 'string',\n        nodePubkey: 'string',\n        activatedStake: 'number',\n        epochVoteAccount: 'boolean',\n        epochCredits: struct.array([\n          struct.tuple(['number', 'number', 'number']),\n        ]),\n        commission: 'number',\n        lastVote: 'number',\n        rootSlot: 'number?',\n      }),\n    ]),\n  }),\n);\n\n/**\n * Expected JSON RPC response for the \"getSignatureStatus\" message\n */\nconst GetSignatureStatusRpcResult = jsonRpcResult(\n  struct.union(['null', SignatureStatusResult]),\n);\n\n/**\n * Expected JSON RPC response for the \"getTransactionCount\" message\n */\nconst GetTransactionCountRpcResult = jsonRpcResult('number');\n\n/**\n * Expected JSON RPC response for the \"getTotalSupply\" message\n */\nconst GetTotalSupplyRpcResult = jsonRpcResult('number');\n\n/**\n * Expected JSON RPC response for the \"getMinimumBalanceForRentExemption\" message\n */\nconst GetMinimumBalanceForRentExemptionRpcResult = jsonRpcResult('number');\n\n/**\n * Expected JSON RPC response for the \"getConfirmedBlock\" message\n */\nexport const GetConfirmedBlockRpcResult = jsonRpcResult(\n  struct.union([\n    'null',\n    struct({\n      blockhash: 'string',\n      previousBlockhash: 'string',\n      parentSlot: 'number',\n      transactions: struct.array([\n        struct({\n          transaction: struct({\n            signatures: struct.array(['string']),\n            message: struct({\n              accountKeys: struct.array(['string']),\n              header: struct({\n                numRequiredSignatures: 'number',\n                numReadonlySignedAccounts: 'number',\n                numReadonlyUnsignedAccounts: 'number',\n              }),\n              instructions: struct.array([\n                struct.union([\n                  struct.array(['number']),\n                  struct({\n                    accounts: struct.array(['number']),\n                    data: 'string',\n                    programIdIndex: 'number',\n                  }),\n                ]),\n              ]),\n              recentBlockhash: 'string',\n            }),\n          }),\n          meta: struct.union([\n            'null',\n            struct({\n              status: struct.union(['null', SignatureStatusResult]),\n              fee: 'number',\n              preBalances: struct.array(['number']),\n              postBalances: struct.array(['number']),\n            }),\n          ]),\n        }),\n      ]),\n      rewards: struct.union([\n        'undefined',\n        struct.array([\n          struct({\n            pubkey: 'string',\n            lamports: 'number',\n          }),\n        ]),\n      ]),\n    }),\n  ]),\n);\n\n/**\n * Expected JSON RPC response for the \"getRecentBlockhash\" message\n */\nconst GetRecentBlockhashAndContextRpcResult = jsonRpcResultAndContext(\n  struct({\n    blockhash: 'string',\n    feeCalculator: struct({\n      burnPercent: 'number',\n      lamportsPerSignature: 'number',\n      maxLamportsPerSignature: 'number',\n      minLamportsPerSignature: 'number',\n      targetLamportsPerSignature: 'number',\n      targetSignaturesPerSlot: 'number',\n    }),\n  }),\n);\n\n/**\n * Expected JSON RPC response for the \"requestAirdrop\" message\n */\nconst RequestAirdropRpcResult = jsonRpcResult('string');\n\n/**\n * Expected JSON RPC response for the \"sendTransaction\" message\n */\nconst SendTransactionRpcResult = jsonRpcResult('string');\n\n/**\n * Information describing an account\n *\n * @typedef {Object} AccountInfo\n * @property {number} lamports Number of lamports assigned to the account\n * @property {PublicKey} owner Identifier of the program that owns the account\n * @property {?Buffer} data Optional data assigned to the account\n * @property {boolean} executable `true` if this account's data contains a loaded program\n */\ntype AccountInfo = {\n  executable: boolean,\n  owner: PublicKey,\n  lamports: number,\n  data: Buffer,\n};\n\n/**\n * Account information identified by pubkey\n *\n * @typedef {Object} KeyedAccountInfo\n * @property {PublicKey} accountId\n * @property {AccountInfo} accountInfo\n */\ntype KeyedAccountInfo = {\n  accountId: PublicKey,\n  accountInfo: AccountInfo,\n};\n\n/**\n * Callback function for account change notifications\n */\nexport type AccountChangeCallback = (accountInfo: AccountInfo) => void;\n\n/**\n * @private\n */\ntype SubscriptionId = 'subscribing' | number;\n\n/**\n * @private\n */\ntype AccountSubscriptionInfo = {\n  publicKey: string, // PublicKey of the account as a base 58 string\n  callback: AccountChangeCallback,\n  subscriptionId: ?SubscriptionId, // null when there's no current server subscription id\n};\n\n/**\n * Callback function for program account change notifications\n */\nexport type ProgramAccountChangeCallback = (\n  keyedAccountInfo: KeyedAccountInfo,\n) => void;\n\n/**\n * @private\n */\ntype ProgramAccountSubscriptionInfo = {\n  programId: string, // PublicKey of the program as a base 58 string\n  callback: ProgramAccountChangeCallback,\n  subscriptionId: ?SubscriptionId, // null when there's no current server subscription id\n};\n\n/**\n * Callback function for slot change notifications\n */\nexport type SlotChangeCallback = (slotInfo: SlotInfo) => void;\n\n/**\n * @private\n */\ntype SlotSubscriptionInfo = {\n  callback: SlotChangeCallback,\n  subscriptionId: ?SubscriptionId, // null when there's no current server subscription id\n};\n\n/**\n * Callback function for signature notifications\n */\nexport type SignatureResultCallback = (\n  signatureResult: SignatureStatusResult,\n) => void;\n\n/**\n * @private\n */\ntype SignatureSubscriptionInfo = {\n  signature: TransactionSignature, // TransactionSignature as a base 58 string\n  callback: SignatureResultCallback,\n  subscriptionId: ?SubscriptionId, // null when there's no current server subscription id\n};\n\n/**\n * Signature status: Success\n *\n * @typedef {Object} SignatureSuccess\n */\nexport type SignatureSuccess = {|\n  Ok: null,\n|};\n\n/**\n * Signature status: TransactionError\n *\n * @typedef {Object} TransactionError\n */\nexport type TransactionError = {|\n  Err: Object,\n|};\n\n/**\n * @ignore\n */\ntype BlockhashAndFeeCalculator = {\n  blockhash: Blockhash,\n  feeCalculator: FeeCalculator,\n}; // This type exists to workaround an esdoc parse error\n\n/**\n * @ignore\n */\ntype PublicKeyAndAccount = {\n  pubkey: PublicKey,\n  account: AccountInfo,\n}; // This type exists to workaround an esdoc parse error\n\n/**\n * A connection to a fullnode JSON RPC endpoint\n */\nexport class Connection {\n  _rpcRequest: RpcRequest;\n  _rpcWebSocket: RpcWebSocketClient;\n  _rpcWebSocketConnected: boolean = false;\n\n  _commitment: ?Commitment;\n  _blockhashInfo: {\n    recentBlockhash: Blockhash | null,\n    seconds: number,\n    transactionSignatures: Array<string>,\n  };\n  _disableBlockhashCaching: boolean = false;\n  _accountChangeSubscriptions: {[number]: AccountSubscriptionInfo} = {};\n  _accountChangeSubscriptionCounter: number = 0;\n  _programAccountChangeSubscriptions: {\n    [number]: ProgramAccountSubscriptionInfo,\n  } = {};\n  _programAccountChangeSubscriptionCounter: number = 0;\n  _slotSubscriptions: {\n    [number]: SlotSubscriptionInfo,\n  } = {};\n  _slotSubscriptionCounter: number = 0;\n  _signatureSubscriptions: {\n    [number]: SignatureSubscriptionInfo,\n  } = {};\n  _signatureSubscriptionCounter: number = 0;\n\n  /**\n   * Establish a JSON RPC connection\n   *\n   * @param endpoint URL to the fullnode JSON RPC endpoint\n   * @param commitment optional default commitment level\n   */\n  constructor(endpoint: string, commitment: ?Commitment) {\n    let url = urlParse(endpoint);\n\n    this._rpcRequest = createRpcRequest(url.href);\n    this._commitment = commitment;\n    this._blockhashInfo = {\n      recentBlockhash: null,\n      seconds: -1,\n      transactionSignatures: [],\n    };\n\n    url.protocol = url.protocol === 'https:' ? 'wss:' : 'ws:';\n    url.host = '';\n    url.port = String(Number(url.port) + 1);\n    if (url.port === '1') {\n      url.port = url.protocol === 'wss:' ? '8901' : '8900';\n    }\n    this._rpcWebSocket = new RpcWebSocketClient(urlFormat(url), {\n      autoconnect: false,\n      max_reconnects: Infinity,\n    });\n    this._rpcWebSocket.on('open', this._wsOnOpen.bind(this));\n    this._rpcWebSocket.on('error', this._wsOnError.bind(this));\n    this._rpcWebSocket.on('close', this._wsOnClose.bind(this));\n    this._rpcWebSocket.on(\n      'accountNotification',\n      this._wsOnAccountNotification.bind(this),\n    );\n    this._rpcWebSocket.on(\n      'programNotification',\n      this._wsOnProgramAccountNotification.bind(this),\n    );\n    this._rpcWebSocket.on(\n      'slotNotification',\n      this._wsOnSlotNotification.bind(this),\n    );\n    this._rpcWebSocket.on(\n      'signatureNotification',\n      this._wsOnSignatureNotification.bind(this),\n    );\n  }\n\n  /**\n   * Fetch the balance for the specified public key, return with context\n   */\n  async getBalanceAndContext(\n    publicKey: PublicKey,\n    commitment: ?Commitment,\n  ): Promise<RpcResponseAndContext<number>> {\n    const args = this._argsWithCommitment([publicKey.toBase58()], commitment);\n    const unsafeRes = await this._rpcRequest('getBalance', args);\n    const res = GetBalanceAndContextRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return res.result;\n  }\n\n  /**\n   * Fetch the balance for the specified public key\n   */\n  async getBalance(\n    publicKey: PublicKey,\n    commitment: ?Commitment,\n  ): Promise<number> {\n    return await this.getBalanceAndContext(publicKey, commitment)\n      .then(x => x.value)\n      .catch(e => {\n        throw e;\n      });\n  }\n\n  /**\n   * Fetch all the account info for the specified public key, return with context\n   */\n  async getAccountInfoAndContext(\n    publicKey: PublicKey,\n    commitment: ?Commitment,\n  ): Promise<RpcResponseAndContext<AccountInfo>> {\n    const args = this._argsWithCommitment([publicKey.toBase58()], commitment);\n    const unsafeRes = await this._rpcRequest('getAccountInfo', args);\n    const res = GetAccountInfoAndContextRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n\n    if (!res.result.value) {\n      throw new Error('Invalid request');\n    }\n\n    const {executable, owner, lamports, data} = res.result.value;\n    const value = {\n      executable,\n      owner: new PublicKey(owner),\n      lamports,\n      data: bs58.decode(data),\n    };\n\n    return {\n      context: {\n        slot: res.result.context.slot,\n      },\n      value,\n    };\n  }\n\n  /**\n   * Fetch all the account info for the specified public key\n   */\n  async getAccountInfo(\n    publicKey: PublicKey,\n    commitment: ?Commitment,\n  ): Promise<AccountInfo> {\n    return await this.getAccountInfoAndContext(publicKey, commitment)\n      .then(x => x.value)\n      .catch(e => {\n        throw e;\n      });\n  }\n\n  /**\n   * Fetch all the accounts owned by the specified program id\n   */\n  async getProgramAccounts(\n    programId: PublicKey,\n    commitment: ?Commitment,\n  ): Promise<Array<PublicKeyAndAccount>> {\n    const args = this._argsWithCommitment([programId.toBase58()], commitment);\n    const unsafeRes = await this._rpcRequest('getProgramAccounts', args);\n    const res = GetProgramAccountsRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n\n    const {result} = res;\n    assert(typeof result !== 'undefined');\n\n    return result.map(result => {\n      return {\n        pubkey: result.pubkey,\n        account: {\n          executable: result.account.executable,\n          owner: new PublicKey(result.account.owner),\n          lamports: result.account.lamports,\n          data: bs58.decode(result.account.data),\n        },\n      };\n    });\n  }\n\n  /**\n   * Confirm the transaction identified by the specified signature, return with context\n   */\n  async confirmTransactionAndContext(\n    signature: TransactionSignature,\n    commitment: ?Commitment,\n  ): Promise<RpcResponseAndContext<boolean>> {\n    const args = this._argsWithCommitment([signature], commitment);\n    const unsafeRes = await this._rpcRequest('confirmTransaction', args);\n    const res = ConfirmTransactionAndContextRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return res.result;\n  }\n\n  /**\n   * Confirm the transaction identified by the specified signature\n   */\n  async confirmTransaction(\n    signature: TransactionSignature,\n    commitment: ?Commitment,\n  ): Promise<boolean> {\n    return await this.confirmTransactionAndContext(signature, commitment)\n      .then(x => x.value)\n      .catch(e => {\n        throw e;\n      });\n  }\n\n  /**\n   * Return the list of nodes that are currently participating in the cluster\n   */\n  async getClusterNodes(): Promise<Array<ContactInfo>> {\n    const unsafeRes = await this._rpcRequest('getClusterNodes', []);\n\n    const res = GetClusterNodes(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return res.result;\n  }\n\n  /**\n   * Return the list of nodes that are currently participating in the cluster\n   */\n  async getVoteAccounts(commitment: ?Commitment): Promise<VoteAccountStatus> {\n    const args = this._argsWithCommitment([], commitment);\n    const unsafeRes = await this._rpcRequest('getVoteAccounts', args);\n    const res = GetVoteAccounts(unsafeRes);\n    //const res = unsafeRes;\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return res.result;\n  }\n\n  /**\n   * Fetch the current slot that the node is processing\n   */\n  async getSlot(commitment: ?Commitment): Promise<number> {\n    const args = this._argsWithCommitment([], commitment);\n    const unsafeRes = await this._rpcRequest('getSlot', args);\n    const res = GetSlot(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return res.result;\n  }\n\n  /**\n   * Fetch the current slot leader of the cluster\n   */\n  async getSlotLeader(commitment: ?Commitment): Promise<string> {\n    const args = this._argsWithCommitment([], commitment);\n    const unsafeRes = await this._rpcRequest('getSlotLeader', args);\n    const res = GetSlotLeader(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return res.result;\n  }\n\n  /**\n   * Fetch the current status of a signature\n   */\n  async getSignatureStatus(\n    signature: TransactionSignature,\n    commitment: ?Commitment,\n  ): Promise<SignatureSuccess | TransactionError | null> {\n    const args = this._argsWithCommitment([signature], commitment);\n    const unsafeRes = await this._rpcRequest('getSignatureStatus', args);\n    const res = GetSignatureStatusRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return res.result;\n  }\n\n  /**\n   * Fetch the current transaction count of the cluster\n   */\n  async getTransactionCount(commitment: ?Commitment): Promise<number> {\n    const args = this._argsWithCommitment([], commitment);\n    const unsafeRes = await this._rpcRequest('getTransactionCount', args);\n    const res = GetTransactionCountRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return Number(res.result);\n  }\n\n  /**\n   * Fetch the current total currency supply of the cluster in lamports\n   */\n  async getTotalSupply(commitment: ?Commitment): Promise<number> {\n    const args = this._argsWithCommitment([], commitment);\n    const unsafeRes = await this._rpcRequest('getTotalSupply', args);\n    const res = GetTotalSupplyRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return Number(res.result);\n  }\n\n  /**\n   * Fetch the cluster Inflation parameters\n   */\n  async getInflation(commitment: ?Commitment): Promise<GetInflationRpcResult> {\n    const args = this._argsWithCommitment([], commitment);\n    const unsafeRes = await this._rpcRequest('getInflation', args);\n    const res = GetInflationRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return GetInflationResult(res.result);\n  }\n\n  /**\n   * Fetch the Epoch Info parameters\n   */\n  async getEpochInfo(commitment: ?Commitment): Promise<GetEpochInfoRpcResult> {\n    const args = this._argsWithCommitment([], commitment);\n    const unsafeRes = await this._rpcRequest('getEpochInfo', args);\n    const res = GetEpochInfoRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return GetEpochInfoResult(res.result);\n  }\n\n  /**\n   * Fetch the Epoch Schedule parameters\n   */\n  async getEpochSchedule(): Promise<GetEpochScheduleRpcResult> {\n    const unsafeRes = await this._rpcRequest('getEpochSchedule', []);\n    const res = GetEpochScheduleRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return GetEpochScheduleResult(res.result);\n  }\n\n  /**\n   * Fetch the minimum balance needed to exempt an account of `dataLength`\n   * size from rent\n   */\n  async getMinimumBalanceForRentExemption(\n    dataLength: number,\n    commitment: ?Commitment,\n  ): Promise<number> {\n    const args = this._argsWithCommitment([dataLength], commitment);\n    const unsafeRes = await this._rpcRequest(\n      'getMinimumBalanceForRentExemption',\n      args,\n    );\n    const res = GetMinimumBalanceForRentExemptionRpcResult(unsafeRes);\n    if (res.error) {\n      console.warn('Unable to fetch minimum balance for rent exemption');\n      return 0;\n    }\n    assert(typeof res.result !== 'undefined');\n    return Number(res.result);\n  }\n\n  /**\n   * Fetch a recent blockhash from the cluster, return with context\n   */\n  async getRecentBlockhashAndContext(\n    commitment: ?Commitment,\n  ): Promise<RpcResponseAndContext<BlockhashAndFeeCalculator>> {\n    const args = this._argsWithCommitment([], commitment);\n    const unsafeRes = await this._rpcRequest('getRecentBlockhash', args);\n\n    const res = GetRecentBlockhashAndContextRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return res.result;\n  }\n\n  /**\n   * Fetch a recent blockhash from the cluster\n   */\n  async getRecentBlockhash(\n    commitment: ?Commitment,\n  ): Promise<BlockhashAndFeeCalculator> {\n    return await this.getRecentBlockhashAndContext(commitment)\n      .then(x => x.value)\n      .catch(e => {\n        throw e;\n      });\n  }\n\n  /**\n   * Fetch the node version\n   */\n  async getVersion(): Promise<Version> {\n    const unsafeRes = await this._rpcRequest('getVersion', []);\n    const res = GetVersionRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return res.result;\n  }\n\n  /**\n   * Fetch a list of Transactions and transaction statuses from the cluster\n   * for a confirmed block\n   */\n  async getConfirmedBlock(slot: number): Promise<ConfirmedBlock> {\n    const unsafeRes = await this._rpcRequest('getConfirmedBlock', [slot]);\n    const result = GetConfirmedBlockRpcResult(unsafeRes);\n    if (result.error) {\n      throw new Error(result.error.message);\n    }\n    assert(typeof result.result !== 'undefined');\n    if (!result.result) {\n      throw new Error('Confirmed block ' + slot + ' not found');\n    }\n    return {\n      blockhash: new PublicKey(result.result.blockhash).toString(),\n      previousBlockhash: new PublicKey(\n        result.result.previousBlockhash,\n      ).toString(),\n      parentSlot: result.result.parentSlot,\n      transactions: result.result.transactions.map(result => {\n        return {\n          transaction: Transaction.fromRpcResult(result.transaction),\n          meta: result.meta,\n        };\n      }),\n      rewards: result.result.rewards || [],\n    };\n  }\n\n  /**\n   * Fetch the contents of a Nonce account from the cluster, return with context\n   */\n  async getNonceAndContext(\n    nonceAccount: PublicKey,\n    commitment: ?Commitment,\n  ): Promise<RpcResponseAndContext<NonceAccount>> {\n    const args = this._argsWithCommitment(\n      [nonceAccount.toBase58()],\n      commitment,\n    );\n    const unsafeRes = await this._rpcRequest('getAccountInfo', args);\n    const res = GetAccountInfoAndContextRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    if (!res.result.value) {\n      throw new Error('Invalid request');\n    }\n\n    const value = NonceAccount.fromAccountData(\n      bs58.decode(res.result.value.data),\n    );\n\n    return {\n      context: {\n        slot: res.result.context.slot,\n      },\n      value,\n    };\n  }\n\n  /**\n   * Fetch the contents of a Nonce account from the cluster\n   */\n  async getNonce(\n    nonceAccount: PublicKey,\n    commitment: ?Commitment,\n  ): Promise<NonceAccount> {\n    return await this.getNonceAndContext(nonceAccount, commitment)\n      .then(x => x.value)\n      .catch(e => {\n        throw e;\n      });\n  }\n\n  /**\n   * Request an allocation of lamports to the specified account\n   */\n  async requestAirdrop(\n    to: PublicKey,\n    amount: number,\n    commitment: ?Commitment,\n  ): Promise<TransactionSignature> {\n    const args = this._argsWithCommitment([to.toBase58(), amount], commitment);\n    const unsafeRes = await this._rpcRequest('requestAirdrop', args);\n    const res = RequestAirdropRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return res.result;\n  }\n\n  /**\n   * Sign and send a transaction\n   */\n  async sendTransaction(\n    transaction: Transaction,\n    ...signers: Array<Account>\n  ): Promise<TransactionSignature> {\n    if (transaction.nonceInfo) {\n      transaction.sign(...signers);\n    } else {\n      for (;;) {\n        // Attempt to use a recent blockhash for up to 30 seconds\n        const seconds = new Date().getSeconds();\n        if (\n          this._blockhashInfo.recentBlockhash != null &&\n          this._blockhashInfo.seconds < seconds + 30\n        ) {\n          transaction.recentBlockhash = this._blockhashInfo.recentBlockhash;\n          transaction.sign(...signers);\n          if (!transaction.signature) {\n            throw new Error('!signature'); // should never happen\n          }\n\n          // If the signature of this transaction has not been seen before with the\n          // current recentBlockhash, all done.\n          const signature = transaction.signature.toString();\n          if (!this._blockhashInfo.transactionSignatures.includes(signature)) {\n            this._blockhashInfo.transactionSignatures.push(signature);\n            if (this._disableBlockhashCaching) {\n              this._blockhashInfo.seconds = -1;\n            }\n            break;\n          }\n        }\n\n        // Fetch a new blockhash\n        let attempts = 0;\n        const startTime = Date.now();\n        for (;;) {\n          const {blockhash} = await this.getRecentBlockhash();\n\n          if (this._blockhashInfo.recentBlockhash != blockhash) {\n            this._blockhashInfo = {\n              recentBlockhash: blockhash,\n              seconds: new Date().getSeconds(),\n              transactionSignatures: [],\n            };\n            break;\n          }\n          if (attempts === 50) {\n            throw new Error(\n              `Unable to obtain a new blockhash after ${Date.now() -\n                startTime}ms`,\n            );\n          }\n\n          // Sleep for approximately half a slot\n          await sleep((500 * DEFAULT_TICKS_PER_SLOT) / NUM_TICKS_PER_SECOND);\n\n          ++attempts;\n        }\n      }\n    }\n\n    const wireTransaction = transaction.serialize();\n    return await this.sendRawTransaction(wireTransaction);\n  }\n\n  /**\n   * @private\n   */\n  async validatorExit(): Promise<boolean> {\n    const unsafeRes = await this._rpcRequest('validatorExit', []);\n    const res = jsonRpcResult('boolean')(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    return res.result;\n  }\n\n  /**\n   * Send a transaction that has already been signed and serialized into the\n   * wire format\n   */\n  async sendRawTransaction(\n    rawTransaction: Buffer | Uint8Array | Array<number>,\n  ): Promise<TransactionSignature> {\n    const encodedTransaction = bs58.encode(toBuffer(rawTransaction));\n    const result = await this.sendEncodedTransaction(encodedTransaction);\n    return result;\n  }\n\n  /**\n   * Send a transaction that has already been signed, serialized into the\n   * wire format, and encoded as a base58 string\n   */\n  async sendEncodedTransaction(\n    encodedTransaction: string,\n  ): Promise<TransactionSignature> {\n    const unsafeRes = await this._rpcRequest('sendTransaction', [\n      encodedTransaction,\n    ]);\n    const res = SendTransactionRpcResult(unsafeRes);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    assert(res.result);\n    return res.result;\n  }\n\n  /**\n   * @private\n   */\n  _wsOnOpen() {\n    this._rpcWebSocketConnected = true;\n    this._updateSubscriptions();\n  }\n\n  /**\n   * @private\n   */\n  _wsOnError(err: Error) {\n    console.log('ws error:', err.message);\n  }\n\n  /**\n   * @private\n   */\n  _wsOnClose(code: number, message: string) {\n    // 1000 means _rpcWebSocket.close() was called explicitly\n    if (code !== 1000) {\n      console.log('ws close:', code, message);\n    } else {\n      // Only after an explicit close do we need to explicitly connect again\n      this._rpcWebSocketConnected = false;\n    }\n  }\n\n  /**\n   * @private\n   */\n  async _subscribe<SubInfo: {subscriptionId: ?SubscriptionId}, RpcArgs>(\n    sub: SubInfo,\n    rpcMethod: string,\n    rpcArgs: RpcArgs,\n  ) {\n    if (sub.subscriptionId == null) {\n      sub.subscriptionId = 'subscribing';\n      try {\n        const id = await this._rpcWebSocket.call(rpcMethod, rpcArgs);\n        if (sub.subscriptionId === 'subscribing') {\n          // eslint-disable-next-line require-atomic-updates\n          sub.subscriptionId = id;\n        }\n      } catch (err) {\n        if (sub.subscriptionId === 'subscribing') {\n          // eslint-disable-next-line require-atomic-updates\n          sub.subscriptionId = null;\n        }\n        console.error(`${rpcMethod} error for argument`, rpcArgs, err.message);\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  async _unsubscribe<SubInfo: {subscriptionId: ?SubscriptionId}>(\n    sub: SubInfo,\n    rpcMethod: string,\n  ) {\n    const subscriptionId = sub.subscriptionId;\n    if (subscriptionId != null && typeof subscriptionId != 'string') {\n      const unsubscribeId: number = subscriptionId;\n      try {\n        await this._rpcWebSocket.call(rpcMethod, [unsubscribeId]);\n      } catch (err) {\n        console.log(`${rpcMethod} error:`, err.message);\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  _updateSubscriptions() {\n    const accountKeys = Object.keys(this._accountChangeSubscriptions).map(\n      Number,\n    );\n    const programKeys = Object.keys(\n      this._programAccountChangeSubscriptions,\n    ).map(Number);\n    const slotKeys = Object.keys(this._slotSubscriptions).map(Number);\n    const signatureKeys = Object.keys(this._signatureSubscriptions).map(Number);\n    if (\n      accountKeys.length === 0 &&\n      programKeys.length === 0 &&\n      slotKeys.length === 0 &&\n      signatureKeys.length === 0\n    ) {\n      this._rpcWebSocket.close();\n      return;\n    }\n\n    if (!this._rpcWebSocketConnected) {\n      for (let id of accountKeys) {\n        this._accountChangeSubscriptions[id].subscriptionId = null;\n      }\n      for (let id of programKeys) {\n        this._programAccountChangeSubscriptions[id].subscriptionId = null;\n      }\n      for (let id of slotKeys) {\n        this._slotSubscriptions[id].subscriptionId = null;\n      }\n      for (let id of signatureKeys) {\n        this._signatureSubscriptions[id].subscriptionId = null;\n      }\n      this._rpcWebSocket.connect();\n      return;\n    }\n\n    for (let id of accountKeys) {\n      const sub = this._accountChangeSubscriptions[id];\n      this._subscribe(sub, 'accountSubscribe', [sub.publicKey]);\n    }\n\n    for (let id of programKeys) {\n      const sub = this._programAccountChangeSubscriptions[id];\n      this._subscribe(sub, 'programSubscribe', [sub.programId]);\n    }\n\n    for (let id of slotKeys) {\n      const sub = this._slotSubscriptions[id];\n      this._subscribe(sub, 'slotSubscribe', []);\n    }\n\n    for (let id of signatureKeys) {\n      const sub = this._signatureSubscriptions[id];\n      this._subscribe(sub, 'signatureSubscribe', [sub.signature]);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _wsOnAccountNotification(notification: Object) {\n    const res = AccountNotificationResult(notification);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n\n    const keys = Object.keys(this._accountChangeSubscriptions).map(Number);\n    for (let id of keys) {\n      const sub = this._accountChangeSubscriptions[id];\n      if (sub.subscriptionId === res.subscription) {\n        const {result} = res;\n        assert(typeof result !== 'undefined');\n\n        sub.callback({\n          executable: result.executable,\n          owner: new PublicKey(result.owner),\n          lamports: result.lamports,\n          data: bs58.decode(result.data),\n        });\n        return true;\n      }\n    }\n  }\n\n  /**\n   * Register a callback to be invoked whenever the specified account changes\n   *\n   * @param publickey Public key of the account to monitor\n   * @param callback Function to invoke whenever the account is changed\n   * @return subscription id\n   */\n  onAccountChange(\n    publicKey: PublicKey,\n    callback: AccountChangeCallback,\n  ): number {\n    const id = ++this._accountChangeSubscriptionCounter;\n    this._accountChangeSubscriptions[id] = {\n      publicKey: publicKey.toBase58(),\n      callback,\n      subscriptionId: null,\n    };\n    this._updateSubscriptions();\n    return id;\n  }\n\n  /**\n   * Deregister an account notification callback\n   *\n   * @param id subscription id to deregister\n   */\n  async removeAccountChangeListener(id: number): Promise<void> {\n    if (this._accountChangeSubscriptions[id]) {\n      const subInfo = this._accountChangeSubscriptions[id];\n      delete this._accountChangeSubscriptions[id];\n      await this._unsubscribe(subInfo, 'accountUnsubscribe');\n      this._updateSubscriptions();\n    } else {\n      throw new Error(`Unknown account change id: ${id}`);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _wsOnProgramAccountNotification(notification: Object) {\n    const res = ProgramAccountNotificationResult(notification);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n\n    const keys = Object.keys(this._programAccountChangeSubscriptions).map(\n      Number,\n    );\n    for (let id of keys) {\n      const sub = this._programAccountChangeSubscriptions[id];\n      if (sub.subscriptionId === res.subscription) {\n        const {result} = res;\n        assert(typeof result !== 'undefined');\n\n        sub.callback({\n          accountId: result.pubkey,\n          accountInfo: {\n            executable: result.account.executable,\n            owner: new PublicKey(result.account.owner),\n            lamports: result.account.lamports,\n            data: bs58.decode(result.account.data),\n          },\n        });\n        return true;\n      }\n    }\n  }\n\n  /**\n   * Register a callback to be invoked whenever accounts owned by the\n   * specified program change\n   *\n   * @param programId Public key of the program to monitor\n   * @param callback Function to invoke whenever the account is changed\n   * @return subscription id\n   */\n  onProgramAccountChange(\n    programId: PublicKey,\n    callback: ProgramAccountChangeCallback,\n  ): number {\n    const id = ++this._programAccountChangeSubscriptionCounter;\n    this._programAccountChangeSubscriptions[id] = {\n      programId: programId.toBase58(),\n      callback,\n      subscriptionId: null,\n    };\n    this._updateSubscriptions();\n    return id;\n  }\n\n  /**\n   * Deregister an account notification callback\n   *\n   * @param id subscription id to deregister\n   */\n  async removeProgramAccountChangeListener(id: number): Promise<void> {\n    if (this._programAccountChangeSubscriptions[id]) {\n      const subInfo = this._programAccountChangeSubscriptions[id];\n      delete this._programAccountChangeSubscriptions[id];\n      await this._unsubscribe(subInfo, 'programUnsubscribe');\n      this._updateSubscriptions();\n    } else {\n      throw new Error(`Unknown program account change id: ${id}`);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _wsOnSlotNotification(notification: Object) {\n    const res = SlotNotificationResult(notification);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n    const {parent, slot, root} = res.result;\n\n    const keys = Object.keys(this._slotSubscriptions).map(Number);\n    for (let id of keys) {\n      const sub = this._slotSubscriptions[id];\n      if (sub.subscriptionId === res.subscription) {\n        sub.callback({\n          parent,\n          slot,\n          root,\n        });\n        return true;\n      }\n    }\n  }\n\n  /**\n   * Register a callback to be invoked upon slot changes\n   *\n   * @param callback Function to invoke whenever the slot changes\n   * @return subscription id\n   */\n  onSlotChange(callback: SlotChangeCallback): number {\n    const id = ++this._slotSubscriptionCounter;\n    this._slotSubscriptions[id] = {\n      callback,\n      subscriptionId: null,\n    };\n    this._updateSubscriptions();\n    return id;\n  }\n\n  /**\n   * Deregister a slot notification callback\n   *\n   * @param id subscription id to deregister\n   */\n  async removeSlotChangeListener(id: number): Promise<void> {\n    if (this._slotSubscriptions[id]) {\n      const subInfo = this._slotSubscriptions[id];\n      delete this._slotSubscriptions[id];\n      await this._unsubscribe(subInfo, 'slotUnsubscribe');\n      this._updateSubscriptions();\n    } else {\n      throw new Error(`Unknown slot change id: ${id}`);\n    }\n  }\n\n  _argsWithCommitment(args: Array<any>, override: ?Commitment): Array<any> {\n    const commitment = override || this._commitment;\n    if (commitment) {\n      args.push({commitment});\n    }\n    return args;\n  }\n\n  /**\n   * @private\n   */\n  _wsOnSignatureNotification(notification: Object) {\n    const res = SignatureNotificationResult(notification);\n    if (res.error) {\n      throw new Error(res.error.message);\n    }\n    assert(typeof res.result !== 'undefined');\n\n    const keys = Object.keys(this._signatureSubscriptions).map(Number);\n    for (let id of keys) {\n      const sub = this._signatureSubscriptions[id];\n      if (sub.subscriptionId === res.subscription) {\n        // Signatures subscriptions are auto-removed by the RPC service so\n        // no need to explicitly send an unsubscribe message\n        delete this._signatureSubscriptions[id];\n        this._updateSubscriptions();\n        sub.callback(res.result);\n        return;\n      }\n    }\n  }\n\n  /**\n   * Register a callback to be invoked upon signature updates\n   *\n   * @param signature Transaction signature string in base 58\n   * @param callback Function to invoke on signature notifications\n   * @return subscription id\n   */\n  onSignature(\n    signature: TransactionSignature,\n    callback: SignatureResultCallback,\n  ): number {\n    const id = ++this._signatureSubscriptionCounter;\n    this._signatureSubscriptions[id] = {\n      signature,\n      callback,\n      subscriptionId: null,\n    };\n    this._updateSubscriptions();\n    return id;\n  }\n\n  /**\n   * Deregister a signature notification callback\n   *\n   * @param id subscription id to deregister\n   */\n  async removeSignatureListener(id: number): Promise<void> {\n    if (this._signatureSubscriptions[id]) {\n      const subInfo = this._signatureSubscriptions[id];\n      delete this._signatureSubscriptions[id];\n      await this._unsubscribe(subInfo, 'signatureUnsubscribe');\n      this._updateSubscriptions();\n    } else {\n      throw new Error(`Unknown signature result id: ${id}`);\n    }\n  }\n}\n","// @flow\n\nimport invariant from 'assert';\n\nimport {Connection} from '../connection';\nimport type {Commitment} from '../connection';\nimport {Transaction} from '../transaction';\nimport {sleep} from './sleep';\nimport type {Account} from '../account';\nimport type {TransactionSignature} from '../transaction';\nimport {DEFAULT_TICKS_PER_SLOT, NUM_TICKS_PER_SECOND} from '../timing';\n\n/**\n * Sign, send and confirm a transaction with recent commitment level\n */\nexport async function sendAndConfirmRecentTransaction(\n  connection: Connection,\n  transaction: Transaction,\n  ...signers: Array<Account>\n): Promise<TransactionSignature> {\n  return await _sendAndConfirmTransaction(\n    connection,\n    transaction,\n    signers,\n    'recent',\n  );\n}\n\n/**\n * Sign, send and confirm a transaction\n */\nexport async function sendAndConfirmTransaction(\n  connection: Connection,\n  transaction: Transaction,\n  ...signers: Array<Account>\n): Promise<TransactionSignature> {\n  return await _sendAndConfirmTransaction(connection, transaction, signers);\n}\n\nasync function _sendAndConfirmTransaction(\n  connection: Connection,\n  transaction: Transaction,\n  signers: Array<Account>,\n  commitment: ?Commitment,\n): Promise<TransactionSignature> {\n  let sendRetries = 10;\n  let signature;\n  for (;;) {\n    const start = Date.now();\n    signature = await connection.sendTransaction(transaction, ...signers);\n\n    // Wait up to a couple slots for a confirmation\n    let status = null;\n    let statusRetries = 6;\n    for (;;) {\n      status = await connection.getSignatureStatus(signature, commitment);\n      if (status) {\n        break;\n      }\n\n      if (--statusRetries <= 0) {\n        break;\n      }\n      // Sleep for approximately half a slot\n      await sleep((500 * DEFAULT_TICKS_PER_SLOT) / NUM_TICKS_PER_SECOND);\n    }\n\n    if (status && 'Ok' in status) {\n      break;\n    }\n    if (--sendRetries <= 0) {\n      const duration = (Date.now() - start) / 1000;\n      throw new Error(\n        `Transaction '${signature}' was not confirmed in ${duration.toFixed(\n          2,\n        )} seconds (${JSON.stringify(status)})`,\n      );\n    }\n\n    if (status && status.Err && !('AccountInUse' in status.Err)) {\n      throw new Error(\n        `Transaction ${signature} failed (${JSON.stringify(status)})`,\n      );\n    }\n\n    // Retry in 0..100ms to try to avoid another AccountInUse collision\n    await sleep(Math.random() * 100);\n  }\n\n  invariant(signature !== undefined);\n  return signature;\n}\n","// @flow\n\nimport * as BufferLayout from 'buffer-layout';\n\nimport * as Layout from './layout';\n\n/**\n * @typedef {Object} InstructionType\n * @property (index} The Instruction index (from solana upstream program)\n * @property (BufferLayout} The BufferLayout to use to build data\n */\nexport type InstructionType = {|\n  index: number,\n  layout: typeof BufferLayout,\n|};\n\n/**\n * Populate a buffer of instruction data using an InstructionType\n */\nexport function encodeData(type: InstructionType, fields: Object): Buffer {\n  const allocLength =\n    type.layout.span >= 0 ? type.layout.span : Layout.getAlloc(type, fields);\n  const data = Buffer.alloc(allocLength);\n  const layoutFields = Object.assign({instruction: type.index}, fields);\n  type.layout.encode(layoutFields, data);\n  return data;\n}\n","// @flow\n\nimport * as BufferLayout from 'buffer-layout';\n\nimport {encodeData} from './instruction';\nimport type {InstructionType} from './instruction';\nimport * as Layout from './layout';\nimport {PublicKey} from './publickey';\nimport {SYSVAR_RECENT_BLOCKHASHES_PUBKEY, SYSVAR_RENT_PUBKEY} from './sysvar';\nimport {Transaction, TransactionInstruction} from './transaction';\nimport type {TransactionInstructionCtorFields} from './transaction';\n\n/**\n * System Instruction class\n */\nexport class SystemInstruction extends TransactionInstruction {\n  /**\n   * Type of SystemInstruction\n   */\n  type: InstructionType;\n\n  constructor(opts?: TransactionInstructionCtorFields, type?: InstructionType) {\n    if (\n      opts &&\n      opts.programId &&\n      !opts.programId.equals(SystemProgram.programId)\n    ) {\n      throw new Error('programId incorrect; not a SystemInstruction');\n    }\n    super(opts);\n    if (type) {\n      this.type = type;\n    }\n  }\n\n  static from(instruction: TransactionInstruction): SystemInstruction {\n    if (!instruction.programId.equals(SystemProgram.programId)) {\n      throw new Error('programId incorrect; not SystemProgram');\n    }\n\n    const instructionTypeLayout = BufferLayout.u32('instruction');\n    const typeIndex = instructionTypeLayout.decode(instruction.data);\n    let type;\n    for (const t in SystemInstructionLayout) {\n      if (SystemInstructionLayout[t].index == typeIndex) {\n        type = SystemInstructionLayout[t];\n      }\n    }\n    if (!type) {\n      throw new Error('Instruction type incorrect; not a SystemInstruction');\n    }\n    return new SystemInstruction(\n      {\n        keys: instruction.keys,\n        programId: instruction.programId,\n        data: instruction.data,\n      },\n      type,\n    );\n  }\n\n  /**\n   * The `from` public key of the instruction;\n   * returns null if SystemInstructionType does not support this field\n   */\n  get fromPublicKey(): PublicKey | null {\n    if (\n      this.type == SystemInstructionLayout.Create ||\n      this.type == SystemInstructionLayout.CreateWithSeed ||\n      this.type == SystemInstructionLayout.WithdrawNonceAccount ||\n      this.type == SystemInstructionLayout.Transfer\n    ) {\n      return this.keys[0].pubkey;\n    }\n    return null;\n  }\n\n  /**\n   * The `to` public key of the instruction;\n   * returns null if SystemInstructionType does not support this field\n   */\n  get toPublicKey(): PublicKey | null {\n    if (\n      this.type == SystemInstructionLayout.Create ||\n      this.type == SystemInstructionLayout.CreateWithSeed ||\n      this.type == SystemInstructionLayout.WithdrawNonceAccount ||\n      this.type == SystemInstructionLayout.Transfer\n    ) {\n      return this.keys[1].pubkey;\n    }\n    return null;\n  }\n\n  /**\n   * The `amount` or `lamports` of the instruction;\n   * returns null if SystemInstructionType does not support this field\n   */\n  get amount(): number | null {\n    const data = this.type.layout.decode(this.data);\n    if (\n      this.type == SystemInstructionLayout.Create ||\n      this.type == SystemInstructionLayout.CreateWithSeed ||\n      this.type == SystemInstructionLayout.WithdrawNonceAccount ||\n      this.type == SystemInstructionLayout.Transfer\n    ) {\n      return data.lamports;\n    }\n    return null;\n  }\n}\n\n/**\n * An enumeration of valid SystemInstructionTypes\n */\nconst SystemInstructionLayout = Object.freeze({\n  Create: {\n    index: 0,\n    layout: BufferLayout.struct([\n      BufferLayout.u32('instruction'),\n      BufferLayout.ns64('lamports'),\n      BufferLayout.ns64('space'),\n      Layout.publicKey('programId'),\n    ]),\n  },\n  Assign: {\n    index: 1,\n    layout: BufferLayout.struct([\n      BufferLayout.u32('instruction'),\n      Layout.publicKey('programId'),\n    ]),\n  },\n  Transfer: {\n    index: 2,\n    layout: BufferLayout.struct([\n      BufferLayout.u32('instruction'),\n      BufferLayout.ns64('lamports'),\n    ]),\n  },\n  CreateWithSeed: {\n    index: 3,\n    layout: BufferLayout.struct([\n      BufferLayout.u32('instruction'),\n      Layout.publicKey('base'),\n      Layout.rustString('seed'),\n      BufferLayout.ns64('lamports'),\n      BufferLayout.ns64('space'),\n      Layout.publicKey('programId'),\n    ]),\n  },\n  AdvanceNonceAccount: {\n    index: 4,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction')]),\n  },\n  WithdrawNonceAccount: {\n    index: 5,\n    layout: BufferLayout.struct([\n      BufferLayout.u32('instruction'),\n      BufferLayout.ns64('lamports'),\n    ]),\n  },\n  InitializeNonceAccount: {\n    index: 6,\n    layout: BufferLayout.struct([\n      BufferLayout.u32('instruction'),\n      Layout.publicKey('authorized'),\n    ]),\n  },\n  AuthorizeNonceAccount: {\n    index: 7,\n    layout: BufferLayout.struct([\n      BufferLayout.u32('instruction'),\n      Layout.publicKey('authorized'),\n    ]),\n  },\n});\n\n/**\n * Factory class for transactions to interact with the System program\n */\nexport class SystemProgram {\n  /**\n   * Public key that identifies the System program\n   */\n  static get programId(): PublicKey {\n    return new PublicKey(\n      '0x000000000000000000000000000000000000000000000000000000000000000',\n    );\n  }\n\n  /**\n   * Max space of a Nonce account\n   */\n  static get nonceSpace(): number {\n    return 68;\n  }\n\n  /**\n   * Generate a Transaction that creates a new account\n   */\n  static createAccount(\n    from: PublicKey,\n    newAccount: PublicKey,\n    lamports: number,\n    space: number,\n    programId: PublicKey,\n  ): Transaction {\n    const type = SystemInstructionLayout.Create;\n    const data = encodeData(type, {\n      lamports,\n      space,\n      programId: programId.toBuffer(),\n    });\n\n    return new Transaction().add({\n      keys: [\n        {pubkey: from, isSigner: true, isWritable: true},\n        {pubkey: newAccount, isSigner: true, isWritable: true},\n      ],\n      programId: this.programId,\n      data,\n    });\n  }\n\n  /**\n   * Generate a Transaction that transfers lamports from one account to another\n   */\n  static transfer(\n    from: PublicKey,\n    to: PublicKey,\n    lamports: number,\n  ): Transaction {\n    const type = SystemInstructionLayout.Transfer;\n    const data = encodeData(type, {lamports});\n\n    return new Transaction().add({\n      keys: [\n        {pubkey: from, isSigner: true, isWritable: true},\n        {pubkey: to, isSigner: false, isWritable: true},\n      ],\n      programId: this.programId,\n      data,\n    });\n  }\n\n  /**\n   * Generate a Transaction that assigns an account to a program\n   */\n  static assign(from: PublicKey, programId: PublicKey): Transaction {\n    const type = SystemInstructionLayout.Assign;\n    const data = encodeData(type, {programId: programId.toBuffer()});\n\n    return new Transaction().add({\n      keys: [{pubkey: from, isSigner: true, isWritable: true}],\n      programId: this.programId,\n      data,\n    });\n  }\n\n  /**\n   * Generate a Transaction that creates a new account at\n   *   an address generated with `from`, a seed, and programId\n   */\n  static createAccountWithSeed(\n    from: PublicKey,\n    newAccount: PublicKey,\n    base: PublicKey,\n    seed: string,\n    lamports: number,\n    space: number,\n    programId: PublicKey,\n  ): Transaction {\n    const type = SystemInstructionLayout.CreateWithSeed;\n    const data = encodeData(type, {\n      base: base.toBuffer(),\n      seed,\n      lamports,\n      space,\n      programId: programId.toBuffer(),\n    });\n\n    return new Transaction().add({\n      keys: [\n        {pubkey: from, isSigner: true, isWritable: true},\n        {pubkey: newAccount, isSigner: false, isWritable: true},\n      ],\n      programId: this.programId,\n      data,\n    });\n  }\n\n  /**\n   * Generate a Transaction that creates a new Nonce account\n   */\n  static createNonceAccount(\n    from: PublicKey,\n    nonceAccount: PublicKey,\n    authorizedPubkey: PublicKey,\n    lamports: number,\n  ): Transaction {\n    let transaction = SystemProgram.createAccount(\n      from,\n      nonceAccount,\n      lamports,\n      this.nonceSpace,\n      this.programId,\n    );\n\n    const type = SystemInstructionLayout.InitializeNonceAccount;\n    const data = encodeData(type, {\n      authorized: authorizedPubkey.toBuffer(),\n    });\n\n    return transaction.add({\n      keys: [\n        {pubkey: nonceAccount, isSigner: false, isWritable: true},\n        {\n          pubkey: SYSVAR_RECENT_BLOCKHASHES_PUBKEY,\n          isSigner: false,\n          isWritable: false,\n        },\n        {pubkey: SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false},\n      ],\n      programId: this.programId,\n      data,\n    });\n  }\n\n  /**\n   * Generate an instruction to advance the nonce in a Nonce account\n   */\n  static nonceAdvance(\n    nonceAccount: PublicKey,\n    authorizedPubkey: PublicKey,\n  ): TransactionInstruction {\n    const type = SystemInstructionLayout.AdvanceNonceAccount;\n    const data = encodeData(type);\n    const instructionData = {\n      keys: [\n        {pubkey: nonceAccount, isSigner: false, isWritable: true},\n        {\n          pubkey: SYSVAR_RECENT_BLOCKHASHES_PUBKEY,\n          isSigner: false,\n          isWritable: false,\n        },\n        {pubkey: authorizedPubkey, isSigner: true, isWritable: false},\n      ],\n      programId: this.programId,\n      data,\n    };\n    return new TransactionInstruction(instructionData);\n  }\n\n  /**\n   * Generate a Transaction that withdraws lamports from a Nonce account\n   */\n  static nonceWithdraw(\n    nonceAccount: PublicKey,\n    authorizedPubkey: PublicKey,\n    to: PublicKey,\n    lamports: number,\n  ): Transaction {\n    const type = SystemInstructionLayout.WithdrawNonceAccount;\n    const data = encodeData(type, {lamports});\n\n    return new Transaction().add({\n      keys: [\n        {pubkey: nonceAccount, isSigner: false, isWritable: true},\n        {pubkey: to, isSigner: false, isWritable: true},\n        {\n          pubkey: SYSVAR_RECENT_BLOCKHASHES_PUBKEY,\n          isSigner: false,\n          isWritable: false,\n        },\n        {\n          pubkey: SYSVAR_RENT_PUBKEY,\n          isSigner: false,\n          isWritable: false,\n        },\n        {pubkey: authorizedPubkey, isSigner: true, isWritable: false},\n      ],\n      programId: this.programId,\n      data,\n    });\n  }\n\n  /**\n   * Generate a Transaction that authorizes a new PublicKey as the authority\n   * on a Nonce account.\n   */\n  static nonceAuthorize(\n    nonceAccount: PublicKey,\n    authorizedPubkey: PublicKey,\n    newAuthorized: PublicKey,\n  ): Transaction {\n    const type = SystemInstructionLayout.AuthorizeNonceAccount;\n    const data = encodeData(type, {\n      newAuthorized: newAuthorized.toBuffer(),\n    });\n\n    return new Transaction().add({\n      keys: [\n        {pubkey: nonceAccount, isSigner: false, isWritable: true},\n        {pubkey: authorizedPubkey, isSigner: true, isWritable: false},\n      ],\n      programId: this.programId,\n      data,\n    });\n  }\n}\n","// @flow\n\nimport * as BufferLayout from 'buffer-layout';\n\nimport {Account} from './account';\nimport {PublicKey} from './publickey';\nimport {NUM_TICKS_PER_SECOND} from './timing';\nimport {Transaction, PACKET_DATA_SIZE} from './transaction';\nimport {SYSVAR_RENT_PUBKEY} from './sysvar';\nimport {sendAndConfirmTransaction} from './util/send-and-confirm-transaction';\nimport {sleep} from './util/sleep';\nimport type {Connection} from './connection';\nimport {SystemProgram} from './system-program';\n\n/**\n * Program loader interface\n */\nexport class Loader {\n  /**\n   * Amount of program data placed in each load Transaction\n   */\n  static get chunkSize(): number {\n    // Keep program chunks under PACKET_DATA_SIZE, leaving enough room for the\n    // rest of the Transaction fields\n    //\n    // TODO: replace 300 with a proper constant for the size of the other\n    // Transaction fields\n    return PACKET_DATA_SIZE - 300;\n  }\n\n  /**\n   * Minimum number of signatures required to load a program not including\n   * retries\n   *\n   * Can be used to calculate transaction fees\n   */\n  static getMinNumSignatures(dataLength: number): number {\n    return Math.ceil(dataLength / Loader.chunkSize);\n  }\n\n  /**\n   * Loads a generic program\n   *\n   * @param connection The connection to use\n   * @param payer System account that pays to load the program\n   * @param program Account to load the program into\n   * @param programId Public key that identifies the loader\n   * @param data Program octets\n   */\n  static async load(\n    connection: Connection,\n    payer: Account,\n    program: Account,\n    programId: PublicKey,\n    data: Buffer | Uint8Array | Array<number>,\n  ): Promise<PublicKey> {\n    {\n      const balanceNeeded = await connection.getMinimumBalanceForRentExemption(\n        data.length,\n      );\n      const transaction = SystemProgram.createAccount(\n        payer.publicKey,\n        program.publicKey,\n        balanceNeeded > 0 ? balanceNeeded : 1,\n        data.length,\n        programId,\n      );\n      await sendAndConfirmTransaction(connection, transaction, payer, program);\n    }\n\n    const dataLayout = BufferLayout.struct([\n      BufferLayout.u32('instruction'),\n      BufferLayout.u32('offset'),\n      BufferLayout.u32('bytesLength'),\n      BufferLayout.u32('bytesLengthPadding'),\n      BufferLayout.seq(\n        BufferLayout.u8('byte'),\n        BufferLayout.offset(BufferLayout.u32(), -8),\n        'bytes',\n      ),\n    ]);\n\n    const chunkSize = Loader.chunkSize;\n    let offset = 0;\n    let array = data;\n    let transactions = [];\n    while (array.length > 0) {\n      const bytes = array.slice(0, chunkSize);\n      const data = Buffer.alloc(chunkSize + 16);\n      dataLayout.encode(\n        {\n          instruction: 0, // Load instruction\n          offset,\n          bytes,\n        },\n        data,\n      );\n\n      const transaction = new Transaction().add({\n        keys: [{pubkey: program.publicKey, isSigner: true, isWritable: true}],\n        programId,\n        data,\n      });\n      transactions.push(\n        sendAndConfirmTransaction(connection, transaction, payer, program),\n      );\n\n      // Delay ~1 tick between write transactions in an attempt to reduce AccountInUse errors\n      // since all the write transactions modify the same program account\n      await sleep(1000 / NUM_TICKS_PER_SECOND);\n\n      // Run up to 8 Loads in parallel to prevent too many parallel transactions from\n      // getting rejected with AccountInUse.\n      //\n      // TODO: 8 was selected empirically and should probably be revisited\n      if (transactions.length === 8) {\n        await Promise.all(transactions);\n        transactions = [];\n      }\n\n      offset += chunkSize;\n      array = array.slice(chunkSize);\n    }\n    await Promise.all(transactions);\n\n    // Finalize the account loaded with program data for execution\n    {\n      const dataLayout = BufferLayout.struct([BufferLayout.u32('instruction')]);\n\n      const data = Buffer.alloc(dataLayout.span);\n      dataLayout.encode(\n        {\n          instruction: 1, // Finalize instruction\n        },\n        data,\n      );\n\n      const transaction = new Transaction().add({\n        keys: [\n          {pubkey: program.publicKey, isSigner: true, isWritable: true},\n          {pubkey: SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false},\n        ],\n        programId,\n        data,\n      });\n      await sendAndConfirmTransaction(connection, transaction, payer, program);\n    }\n    return program.publicKey;\n  }\n}\n","// @flow\n\nimport {Account} from './account';\nimport {PublicKey} from './publickey';\nimport {Loader} from './loader';\nimport type {Connection} from './connection';\n\n/**\n * Factory class for transactions to interact with a program loader\n */\nexport class BpfLoader {\n  /**\n   * Public key that identifies the BpfLoader\n   */\n  static get programId(): PublicKey {\n    return new PublicKey('BPFLoader1111111111111111111111111111111111');\n  }\n\n  /**\n   * Minimum number of signatures required to load a program not including\n   * retries\n   *\n   * Can be used to calculate transaction fees\n   */\n  static getMinNumSignatures(dataLength: number): number {\n    return Loader.getMinNumSignatures(dataLength);\n  }\n\n  /**\n   * Load a BPF program\n   *\n   * @param connection The connection to use\n   * @param owner User account to load the program into\n   * @param elfBytes The entire ELF containing the BPF program\n   */\n  static load(\n    connection: Connection,\n    payer: Account,\n    elf: Buffer | Uint8Array | Array<number>,\n  ): Promise<PublicKey> {\n    const program = new Account();\n    return Loader.load(connection, payer, program, BpfLoader.programId, elf);\n  }\n}\n","// @flow\n\nimport * as BufferLayout from 'buffer-layout';\n\nimport {Transaction} from './transaction';\nimport {PublicKey} from './publickey';\nimport {SystemProgram} from './system-program';\n\n/**\n * Represents a condition that is met by executing a `applySignature()`\n * transaction\n *\n * @typedef {Object} SignatureCondition\n * @property {string} type Must equal the string 'timestamp'\n * @property {PublicKey} from Public key from which `applySignature()` will be accepted from\n */\nexport type SignatureCondition = {\n  type: 'signature',\n  from: PublicKey,\n};\n\n/**\n * Represents a condition that is met by executing a `applyTimestamp()`\n * transaction\n *\n * @typedef {Object} TimestampCondition\n * @property {string} type Must equal the string 'timestamp'\n * @property {PublicKey} from Public key from which `applyTimestamp()` will be accepted from\n * @property {Date} when The timestamp that was observed\n */\nexport type TimestampCondition = {\n  type: 'timestamp',\n  from: PublicKey,\n  when: Date,\n};\n\n/**\n * Represents a payment to a given public key\n *\n * @typedef {Object} Payment\n * @property {number} amount Number of lamports\n * @property {PublicKey} to Public key of the recipient\n */\nexport type Payment = {\n  amount: number,\n  to: PublicKey,\n};\n\n/**\n * A condition that can unlock a payment\n *\n * @typedef {SignatureCondition|TimestampCondition} BudgetCondition\n */\nexport type BudgetCondition = SignatureCondition | TimestampCondition;\n\n/**\n * @private\n */\nfunction serializePayment(payment: Payment): Buffer {\n  const toData = payment.to.toBuffer();\n  const data = Buffer.alloc(8 + toData.length);\n  data.writeUInt32LE(payment.amount, 0);\n  toData.copy(data, 8);\n  return data;\n}\n\n/**\n * @private\n */\nfunction serializeDate(when: Date): Buffer {\n  const data = Buffer.alloc(8 + 20);\n  data.writeUInt32LE(20, 0); // size of timestamp as u64\n\n  function iso(date) {\n    function pad(number) {\n      if (number < 10) {\n        return '0' + number;\n      }\n      return number;\n    }\n\n    return (\n      date.getUTCFullYear() +\n      '-' +\n      pad(date.getUTCMonth() + 1) +\n      '-' +\n      pad(date.getUTCDate()) +\n      'T' +\n      pad(date.getUTCHours()) +\n      ':' +\n      pad(date.getUTCMinutes()) +\n      ':' +\n      pad(date.getUTCSeconds()) +\n      'Z'\n    );\n  }\n  data.write(iso(when), 8);\n  return data;\n}\n\n/**\n * @private\n */\nfunction serializeCondition(condition: BudgetCondition) {\n  switch (condition.type) {\n    case 'timestamp': {\n      const date = serializeDate(condition.when);\n      const from = condition.from.toBuffer();\n\n      const data = Buffer.alloc(4 + date.length + from.length);\n      data.writeUInt32LE(0, 0); // Condition enum = Timestamp\n      date.copy(data, 4);\n      from.copy(data, 4 + date.length);\n      return data;\n    }\n    case 'signature': {\n      const from = condition.from.toBuffer();\n      const data = Buffer.alloc(4 + from.length);\n      data.writeUInt32LE(1, 0); // Condition enum = Signature\n      from.copy(data, 4);\n      return data;\n    }\n    default:\n      throw new Error(`Unknown condition type: ${condition.type}`);\n  }\n}\n\n/**\n * Factory class for transactions to interact with the Budget program\n */\nexport class BudgetProgram {\n  /**\n   * Public key that identifies the Budget program\n   */\n  static get programId(): PublicKey {\n    return new PublicKey('Budget1111111111111111111111111111111111111');\n  }\n\n  /**\n   * The amount of space this program requires\n   */\n  static get space(): number {\n    return 128;\n  }\n\n  /**\n   * Creates a timestamp condition\n   */\n  static timestampCondition(from: PublicKey, when: Date): TimestampCondition {\n    return {\n      type: 'timestamp',\n      from,\n      when,\n    };\n  }\n\n  /**\n   * Creates a signature condition\n   */\n  static signatureCondition(from: PublicKey): SignatureCondition {\n    return {\n      type: 'signature',\n      from,\n    };\n  }\n\n  /**\n   * Generates a transaction that transfers lamports once any of the conditions are met\n   */\n  static pay(\n    from: PublicKey,\n    program: PublicKey,\n    to: PublicKey,\n    amount: number,\n    ...conditions: Array<BudgetCondition>\n  ): Transaction {\n    const data = Buffer.alloc(1024);\n    let pos = 0;\n    data.writeUInt32LE(0, pos); // NewBudget instruction\n    pos += 4;\n\n    switch (conditions.length) {\n      case 0: {\n        data.writeUInt32LE(0, pos); // BudgetExpr enum = Pay\n        pos += 4;\n\n        {\n          const payment = serializePayment({amount, to});\n          payment.copy(data, pos);\n          pos += payment.length;\n        }\n        const trimmedData = data.slice(0, pos);\n\n        const transaction = SystemProgram.createAccount(\n          from,\n          program,\n          amount,\n          trimmedData.length,\n          this.programId,\n        );\n\n        return transaction.add({\n          keys: [\n            {pubkey: to, isSigner: false, isWritable: true},\n            {pubkey: program, isSigner: false, isWritable: true},\n          ],\n          programId: this.programId,\n          data: trimmedData,\n        });\n      }\n      case 1: {\n        data.writeUInt32LE(1, pos); // BudgetExpr enum = After\n        pos += 4;\n        {\n          const condition = conditions[0];\n\n          const conditionData = serializeCondition(condition);\n          conditionData.copy(data, pos);\n          pos += conditionData.length;\n\n          data.writeUInt32LE(0, pos); // BudgetExpr enum = Pay\n          pos += 4;\n\n          const paymentData = serializePayment({amount, to});\n          paymentData.copy(data, pos);\n          pos += paymentData.length;\n        }\n        const trimmedData = data.slice(0, pos);\n\n        const transaction = SystemProgram.createAccount(\n          from,\n          program,\n          amount,\n          trimmedData.length,\n          this.programId,\n        );\n\n        return transaction.add({\n          keys: [{pubkey: program, isSigner: false, isWritable: true}],\n          programId: this.programId,\n          data: trimmedData,\n        });\n      }\n\n      case 2: {\n        data.writeUInt32LE(2, pos); // BudgetExpr enum = Or\n        pos += 4;\n\n        for (let condition of conditions) {\n          const conditionData = serializeCondition(condition);\n          conditionData.copy(data, pos);\n          pos += conditionData.length;\n\n          data.writeUInt32LE(0, pos); // BudgetExpr enum = Pay\n          pos += 4;\n\n          const paymentData = serializePayment({amount, to});\n          paymentData.copy(data, pos);\n          pos += paymentData.length;\n        }\n        const trimmedData = data.slice(0, pos);\n\n        const transaction = SystemProgram.createAccount(\n          from,\n          program,\n          amount,\n          trimmedData.length,\n          this.programId,\n        );\n\n        return transaction.add({\n          keys: [{pubkey: program, isSigner: false, isWritable: true}],\n          programId: this.programId,\n          data: trimmedData,\n        });\n      }\n\n      default:\n        throw new Error(\n          `A maximum of two conditions are supported: ${conditions.length} provided`,\n        );\n    }\n  }\n\n  /**\n   * Generates a transaction that transfers lamports once both conditions are met\n   */\n  static payOnBoth(\n    from: PublicKey,\n    program: PublicKey,\n    to: PublicKey,\n    amount: number,\n    condition1: BudgetCondition,\n    condition2: BudgetCondition,\n  ): Transaction {\n    const data = Buffer.alloc(1024);\n    let pos = 0;\n    data.writeUInt32LE(0, pos); // NewBudget instruction\n    pos += 4;\n\n    data.writeUInt32LE(3, pos); // BudgetExpr enum = And\n    pos += 4;\n\n    for (let condition of [condition1, condition2]) {\n      const conditionData = serializeCondition(condition);\n      conditionData.copy(data, pos);\n      pos += conditionData.length;\n    }\n\n    data.writeUInt32LE(0, pos); // BudgetExpr enum = Pay\n    pos += 4;\n\n    const paymentData = serializePayment({amount, to});\n    paymentData.copy(data, pos);\n    pos += paymentData.length;\n\n    const trimmedData = data.slice(0, pos);\n\n    const transaction = SystemProgram.createAccount(\n      from,\n      program,\n      amount,\n      trimmedData.length,\n      this.programId,\n    );\n\n    return transaction.add({\n      keys: [{pubkey: program, isSigner: false, isWritable: true}],\n      programId: this.programId,\n      data: trimmedData,\n    });\n  }\n\n  /**\n   * Generates a transaction that applies a timestamp, which could enable a\n   * pending payment to proceed.\n   */\n  static applyTimestamp(\n    from: PublicKey,\n    program: PublicKey,\n    to: PublicKey,\n    when: Date,\n  ): Transaction {\n    const whenData = serializeDate(when);\n    const data = Buffer.alloc(4 + whenData.length);\n\n    data.writeUInt32LE(1, 0); // ApplyTimestamp instruction\n    whenData.copy(data, 4);\n\n    return new Transaction().add({\n      keys: [\n        {pubkey: from, isSigner: true, isWritable: true},\n        {pubkey: program, isSigner: false, isWritable: true},\n        {pubkey: to, isSigner: false, isWritable: true},\n      ],\n      programId: this.programId,\n      data,\n    });\n  }\n\n  /**\n   * Generates a transaction that applies a signature, which could enable a\n   * pending payment to proceed.\n   */\n  static applySignature(\n    from: PublicKey,\n    program: PublicKey,\n    to: PublicKey,\n  ): Transaction {\n    const dataLayout = BufferLayout.struct([BufferLayout.u32('instruction')]);\n\n    const data = Buffer.alloc(dataLayout.span);\n    dataLayout.encode(\n      {\n        instruction: 2, // ApplySignature instruction\n      },\n      data,\n    );\n\n    return new Transaction().add({\n      keys: [\n        {pubkey: from, isSigner: true, isWritable: true},\n        {pubkey: program, isSigner: false, isWritable: true},\n        {pubkey: to, isSigner: false, isWritable: true},\n      ],\n      programId: this.programId,\n      data,\n    });\n  }\n}\n","// @flow\n\nimport * as BufferLayout from 'buffer-layout';\n\nimport {encodeData} from './instruction';\nimport type {InstructionType} from './instruction';\nimport * as Layout from './layout';\nimport {PublicKey} from './publickey';\nimport {SystemProgram} from './system-program';\nimport {\n  SYSVAR_CLOCK_PUBKEY,\n  SYSVAR_RENT_PUBKEY,\n  SYSVAR_STAKE_HISTORY_PUBKEY,\n} from './sysvar';\nimport {Transaction, TransactionInstruction} from './transaction';\nimport type {TransactionInstructionCtorFields} from './transaction';\n\nexport const STAKE_CONFIG_ID = new PublicKey(\n  'StakeConfig11111111111111111111111111111111',\n);\n\nexport class Authorized {\n  staker: PublicKey;\n  withdrawer: PublicKey;\n\n  /**\n   * Create a new Authorized object\n   */\n  constructor(staker: PublicKey, withdrawer: PublicKey) {\n    this.staker = staker;\n    this.withdrawer = withdrawer;\n  }\n}\n\nexport class Lockup {\n  unixTimestamp: number;\n  epoch: number;\n  custodian: PublicKey;\n\n  /**\n   * Create a new Lockup object\n   */\n  constructor(unixTimestamp: number, epoch: number, custodian: PublicKey) {\n    this.unixTimestamp = unixTimestamp;\n    this.epoch = epoch;\n    this.custodian = custodian;\n  }\n}\n\n/**\n * Stake Instruction class\n */\nexport class StakeInstruction extends TransactionInstruction {\n  /**\n   * Type of StakeInstruction\n   */\n  type: InstructionType;\n\n  constructor(opts?: TransactionInstructionCtorFields, type?: InstructionType) {\n    if (\n      opts &&\n      opts.programId &&\n      !opts.programId.equals(StakeProgram.programId)\n    ) {\n      throw new Error('programId incorrect; not a StakeInstruction');\n    }\n    super(opts);\n    if (type) {\n      this.type = type;\n    }\n  }\n\n  static from(instruction: TransactionInstruction): StakeInstruction {\n    if (!instruction.programId.equals(StakeProgram.programId)) {\n      throw new Error('programId incorrect; not StakeProgram');\n    }\n\n    const instructionTypeLayout = BufferLayout.u32('instruction');\n    const typeIndex = instructionTypeLayout.decode(instruction.data);\n    let type;\n    for (const t in StakeInstructionLayout) {\n      if (StakeInstructionLayout[t].index == typeIndex) {\n        type = StakeInstructionLayout[t];\n      }\n    }\n    if (!type) {\n      throw new Error('Instruction type incorrect; not a StakeInstruction');\n    }\n    return new StakeInstruction(\n      {\n        keys: instruction.keys,\n        programId: instruction.programId,\n        data: instruction.data,\n      },\n      type,\n    );\n  }\n}\n\n/**\n * An enumeration of valid StakeInstructionTypes\n */\nexport const StakeInstructionLayout = Object.freeze({\n  Initialize: {\n    index: 0,\n    layout: BufferLayout.struct([\n      BufferLayout.u32('instruction'),\n      Layout.authorized(),\n      Layout.lockup(),\n    ]),\n  },\n  Authorize: {\n    index: 1,\n    layout: BufferLayout.struct([\n      BufferLayout.u32('instruction'),\n      Layout.publicKey('newAuthorized'),\n      BufferLayout.u32('stakeAuthorizationType'),\n    ]),\n  },\n  DelegateStake: {\n    index: 2,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction')]),\n  },\n  Split: {\n    index: 3,\n    layout: BufferLayout.struct([\n      BufferLayout.u32('instruction'),\n      BufferLayout.ns64('lamports'),\n    ]),\n  },\n  Withdraw: {\n    index: 4,\n    layout: BufferLayout.struct([\n      BufferLayout.u32('instruction'),\n      BufferLayout.ns64('lamports'),\n    ]),\n  },\n  Deactivate: {\n    index: 5,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction')]),\n  },\n});\n\n/**\n * @typedef {Object} StakeAuthorizationType\n * @property (index} The Stake Authorization index (from solana-stake-program)\n */\nexport type StakeAuthorizationType = {|\n  index: number,\n|};\n\n/**\n * An enumeration of valid StakeInstructionTypes\n */\nexport const StakeAuthorizationLayout = Object.freeze({\n  Staker: {\n    index: 0,\n  },\n  Withdrawer: {\n    index: 1,\n  },\n});\n\n/**\n * Factory class for transactions to interact with the Stake program\n */\nexport class StakeProgram {\n  /**\n   * Public key that identifies the Stake program\n   */\n  static get programId(): PublicKey {\n    return new PublicKey('Stake11111111111111111111111111111111111111');\n  }\n\n  /**\n   * Max space of a Stake account\n   */\n  static get space(): number {\n    return 4008;\n  }\n\n  /**\n   * Generate an Initialize instruction to add to a Stake Create transaction\n   */\n  static initialize(\n    stakeAccount: PublicKey,\n    authorized: Authorized,\n    lockup: Lockup,\n  ): TransactionInstruction {\n    const type = StakeInstructionLayout.Initialize;\n    const data = encodeData(type, {\n      authorized: {\n        staker: authorized.staker.toBuffer(),\n        withdrawer: authorized.withdrawer.toBuffer(),\n      },\n      lockup: {\n        unixTimestamp: lockup.unixTimestamp,\n        epoch: lockup.epoch,\n        custodian: lockup.custodian.toBuffer(),\n      },\n    });\n    const instructionData = {\n      keys: [\n        {pubkey: stakeAccount, isSigner: false, isWritable: true},\n        {pubkey: SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false},\n      ],\n      programId: this.programId,\n      data,\n    };\n    return new TransactionInstruction(instructionData);\n  }\n\n  /**\n   * Generate a Transaction that creates a new Stake account at\n   *   an address generated with `from`, a seed, and the Stake programId\n   */\n  static createAccountWithSeed(\n    from: PublicKey,\n    stakeAccount: PublicKey,\n    base: PublicKey,\n    seed: string,\n    authorized: Authorized,\n    lockup: Lockup,\n    lamports: number,\n  ): Transaction {\n    let transaction = SystemProgram.createAccountWithSeed(\n      from,\n      stakeAccount,\n      base,\n      seed,\n      lamports,\n      this.space,\n      this.programId,\n    );\n\n    return transaction.add(this.initialize(stakeAccount, authorized, lockup));\n  }\n\n  /**\n   * Generate a Transaction that creates a new Stake account\n   */\n  static createAccount(\n    from: PublicKey,\n    stakeAccount: PublicKey,\n    authorized: Authorized,\n    lockup: Lockup,\n    lamports: number,\n  ): Transaction {\n    let transaction = SystemProgram.createAccount(\n      from,\n      stakeAccount,\n      lamports,\n      this.space,\n      this.programId,\n    );\n\n    return transaction.add(this.initialize(stakeAccount, authorized, lockup));\n  }\n\n  /**\n   * Generate a Transaction that delegates Stake tokens to a validator\n   * Vote PublicKey. This transaction can also be used to redelegate Stake\n   * to a new validator Vote PublicKey.\n   */\n  static delegate(\n    stakeAccount: PublicKey,\n    authorizedPubkey: PublicKey,\n    votePubkey: PublicKey,\n  ): Transaction {\n    const type = StakeInstructionLayout.DelegateStake;\n    const data = encodeData(type);\n\n    return new Transaction().add({\n      keys: [\n        {pubkey: stakeAccount, isSigner: false, isWritable: true},\n        {pubkey: votePubkey, isSigner: false, isWritable: false},\n        {pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: false},\n        {\n          pubkey: SYSVAR_STAKE_HISTORY_PUBKEY,\n          isSigner: false,\n          isWritable: false,\n        },\n        {pubkey: STAKE_CONFIG_ID, isSigner: false, isWritable: false},\n        {pubkey: authorizedPubkey, isSigner: true, isWritable: false},\n      ],\n      programId: this.programId,\n      data,\n    });\n  }\n\n  /**\n   * Generate a Transaction that authorizes a new PublicKey as Staker\n   * or Withdrawer on the Stake account.\n   */\n  static authorize(\n    stakeAccount: PublicKey,\n    authorizedPubkey: PublicKey,\n    newAuthorized: PublicKey,\n    stakeAuthorizationType: StakeAuthorizationType,\n  ): Transaction {\n    const type = StakeInstructionLayout.Authorize;\n    const data = encodeData(type, {\n      newAuthorized: newAuthorized.toBuffer(),\n      stakeAuthorizationType: stakeAuthorizationType.index,\n    });\n\n    return new Transaction().add({\n      keys: [\n        {pubkey: stakeAccount, isSigner: false, isWritable: true},\n        {pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: true},\n        {pubkey: authorizedPubkey, isSigner: true, isWritable: false},\n      ],\n      programId: this.programId,\n      data,\n    });\n  }\n\n  /**\n   * Generate a Transaction that splits Stake tokens into another stake account\n   */\n  static split(\n    stakeAccount: PublicKey,\n    authorizedPubkey: PublicKey,\n    lamports: number,\n    splitStakePubkey: PublicKey,\n  ): Transaction {\n    let transaction = SystemProgram.createAccount(\n      stakeAccount,\n      splitStakePubkey,\n      0,\n      this.space,\n      this.programId,\n    );\n    transaction.instructions[0].keys[0].isSigner = false;\n    const type = StakeInstructionLayout.Split;\n    const data = encodeData(type, {lamports});\n\n    return transaction.add({\n      keys: [\n        {pubkey: stakeAccount, isSigner: false, isWritable: true},\n        {pubkey: splitStakePubkey, isSigner: false, isWritable: true},\n        {pubkey: authorizedPubkey, isSigner: true, isWritable: false},\n      ],\n      programId: this.programId,\n      data,\n    });\n  }\n\n  /**\n   * Generate a Transaction that withdraws deactivated Stake tokens.\n   */\n  static withdraw(\n    stakeAccount: PublicKey,\n    withdrawerPubkey: PublicKey,\n    to: PublicKey,\n    lamports: number,\n  ): Transaction {\n    const type = StakeInstructionLayout.Withdraw;\n    const data = encodeData(type, {lamports});\n\n    return new Transaction().add({\n      keys: [\n        {pubkey: stakeAccount, isSigner: false, isWritable: true},\n        {pubkey: to, isSigner: false, isWritable: true},\n        {pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: false},\n        {\n          pubkey: SYSVAR_STAKE_HISTORY_PUBKEY,\n          isSigner: false,\n          isWritable: false,\n        },\n        {pubkey: withdrawerPubkey, isSigner: true, isWritable: false},\n      ],\n      programId: this.programId,\n      data,\n    });\n  }\n\n  /**\n   * Generate a Transaction that deactivates Stake tokens.\n   */\n  static deactivate(\n    stakeAccount: PublicKey,\n    authorizedPubkey: PublicKey,\n  ): Transaction {\n    const type = StakeInstructionLayout.Deactivate;\n    const data = encodeData(type);\n\n    return new Transaction().add({\n      keys: [\n        {pubkey: stakeAccount, isSigner: false, isWritable: true},\n        {pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: false},\n        {pubkey: authorizedPubkey, isSigner: true, isWritable: false},\n      ],\n      programId: this.programId,\n      data,\n    });\n  }\n}\n","// @flow\n\nimport {struct} from 'superstruct';\n\nimport * as Layout from './layout';\nimport * as shortvec from './util/shortvec-encoding';\nimport {PublicKey} from './publickey';\n\nexport const VALIDATOR_INFO_KEY = new PublicKey(\n  'Va1idator1nfo111111111111111111111111111111',\n);\n\n/**\n * @private\n */\ntype ConfigKey = {|\n  publicKey: PublicKey,\n  isSigner: boolean,\n|};\n\n/**\n * Info used to identity validators.\n *\n * @typedef {Object} Info\n * @property {string} name validator name\n * @property {?string} website optional, validator website\n * @property {?string} details optional, extra information the validator chose to share\n * @property {?string} keybaseUsername optional, used to identify validators on keybase.io\n */\nexport type Info = {|\n  name: string,\n  website?: string,\n  details?: string,\n  keybaseUsername?: string,\n|};\n\nconst InfoString = struct({\n  name: 'string',\n  website: 'string?',\n  details: 'string?',\n  keybaseUsername: 'string?',\n});\n\n/**\n * ValidatorInfo class\n */\nexport class ValidatorInfo {\n  /**\n   * validator public key\n   */\n  key: PublicKey;\n  /**\n   * validator information\n   */\n  info: Info;\n\n  /**\n   * Construct a valid ValidatorInfo\n   *\n   * @param key validator public key\n   * @param info validator information\n   */\n  constructor(key: PublicKey, info: Info) {\n    this.key = key;\n    this.info = info;\n  }\n\n  /**\n   * Deserialize ValidatorInfo from the config account data. Exactly two config\n   * keys are required in the data.\n   *\n   * @param buffer config account data\n   * @return null if info was not found\n   */\n  static fromConfigData(\n    buffer: Buffer | Uint8Array | Array<number>,\n  ): ValidatorInfo | null {\n    const PUBKEY_LENGTH = 32;\n\n    let byteArray = [...buffer];\n    const configKeyCount = shortvec.decodeLength(byteArray);\n    if (configKeyCount !== 2) return null;\n\n    const configKeys: Array<ConfigKey> = [];\n    for (let i = 0; i < 2; i++) {\n      const publicKey = new PublicKey(byteArray.slice(0, PUBKEY_LENGTH));\n      byteArray = byteArray.slice(PUBKEY_LENGTH);\n      const isSigner = byteArray.slice(0, 1)[0] === 1;\n      byteArray = byteArray.slice(1);\n      configKeys.push({publicKey, isSigner});\n    }\n\n    if (configKeys[0].publicKey.equals(VALIDATOR_INFO_KEY)) {\n      if (configKeys[1].isSigner) {\n        const rawInfo = Layout.rustString().decode(Buffer.from(byteArray));\n        const info = InfoString(JSON.parse(rawInfo));\n        return new ValidatorInfo(configKeys[1].publicKey, info);\n      }\n    }\n\n    return null;\n  }\n}\n","// @flow\nimport * as BufferLayout from 'buffer-layout';\n\nimport * as Layout from './layout';\nimport {PublicKey} from './publickey';\nimport {toBuffer} from './util/to-buffer';\n\nexport const VOTE_PROGRAM_ID = new PublicKey(\n  'Vote111111111111111111111111111111111111111',\n);\n\nexport type Lockout = {|\n  slot: number,\n  confirmationCount: number,\n|};\n\n/**\n * History of how many credits earned by the end of each epoch\n */\nexport type EpochCredits = {|\n  epoch: number,\n  credits: number,\n  prevCredits: number,\n|};\n\n/**\n * See https://github.com/solana-labs/solana/blob/8a12ed029cfa38d4a45400916c2463fb82bbec8c/programs/vote_api/src/vote_state.rs#L68-L88\n *\n * @private\n */\nconst VoteAccountLayout = BufferLayout.struct([\n  Layout.publicKey('nodePubkey'),\n  Layout.publicKey('authorizedVoterPubkey'),\n  Layout.publicKey('authorizedWithdrawerPubkey'),\n  BufferLayout.u8('commission'),\n  BufferLayout.nu64(), // votes.length\n  BufferLayout.seq(\n    BufferLayout.struct([\n      BufferLayout.nu64('slot'),\n      BufferLayout.u32('confirmationCount'),\n    ]),\n    BufferLayout.offset(BufferLayout.u32(), -8),\n    'votes',\n  ),\n  BufferLayout.u8('rootSlotValid'),\n  BufferLayout.nu64('rootSlot'),\n  BufferLayout.nu64('epoch'),\n  BufferLayout.nu64('credits'),\n  BufferLayout.nu64('lastEpochCredits'),\n  BufferLayout.nu64(), // epochCredits.length\n  BufferLayout.seq(\n    BufferLayout.struct([\n      BufferLayout.nu64('epoch'),\n      BufferLayout.nu64('credits'),\n      BufferLayout.nu64('prevCredits'),\n    ]),\n    BufferLayout.offset(BufferLayout.u32(), -8),\n    'epochCredits',\n  ),\n]);\n\n/**\n * VoteAccount class\n */\nexport class VoteAccount {\n  nodePubkey: PublicKey;\n  authorizedVoterPubkey: PublicKey;\n  authorizedWithdrawerPubkey: PublicKey;\n  commission: number;\n  votes: Array<Lockout>;\n  rootSlot: number | null;\n  epoch: number;\n  credits: number;\n  lastEpochCredits: number;\n  epochCredits: Array<EpochCredits>;\n\n  /**\n   * Deserialize VoteAccount from the account data.\n   *\n   * @param buffer account data\n   * @return VoteAccount\n   */\n  static fromAccountData(\n    buffer: Buffer | Uint8Array | Array<number>,\n  ): VoteAccount {\n    const va = VoteAccountLayout.decode(toBuffer(buffer), 0);\n    va.nodePubkey = new PublicKey(va.nodePubkey);\n    va.authorizedVoterPubkey = new PublicKey(va.authorizedVoterPubkey);\n    va.authorizedWithdrawerPubkey = new PublicKey(\n      va.authorizedWithdrawerPubkey,\n    );\n    if (!va.rootSlotValid) {\n      va.rootSlot = null;\n    }\n    return va;\n  }\n}\n","// @flow\n\nimport {Connection} from '../connection';\nimport type {Commitment} from '../connection';\nimport {sleep} from './sleep';\nimport type {TransactionSignature} from '../transaction';\nimport {DEFAULT_TICKS_PER_SLOT, NUM_TICKS_PER_SECOND} from '../timing';\n\n/**\n * Sign, send and confirm a raw transaction\n */\nexport async function sendAndConfirmRawTransaction(\n  connection: Connection,\n  rawTransaction: Buffer,\n  commitment: ?Commitment,\n): Promise<TransactionSignature> {\n  const start = Date.now();\n  let signature = await connection.sendRawTransaction(rawTransaction);\n\n  // Wait up to a couple slots for a confirmation\n  let status = null;\n  let statusRetries = 6;\n  for (;;) {\n    status = await connection.getSignatureStatus(signature, commitment);\n    if (status) {\n      break;\n    }\n\n    // Sleep for approximately half a slot\n    await sleep((500 * DEFAULT_TICKS_PER_SLOT) / NUM_TICKS_PER_SECOND);\n\n    if (--statusRetries <= 0) {\n      const duration = (Date.now() - start) / 1000;\n      throw new Error(\n        `Raw Transaction '${signature}' was not confirmed in ${duration.toFixed(\n          2,\n        )} seconds (${JSON.stringify(status)})`,\n      );\n    }\n  }\n\n  if (status && 'Ok' in status) {\n    return signature;\n  }\n\n  throw new Error(\n    `Raw transaction ${signature} failed (${JSON.stringify(status)})`,\n  );\n}\n","//@flow\n\nimport {testnetDefaultChannel} from '../../package.json';\n\n/**\n * @private\n */\nconst endpoint = {\n  http: {\n    edge: 'http://edge.testnet.solana.com:8899',\n    beta: 'http://beta.testnet.solana.com:8899',\n    stable: 'http://testnet.solana.com:8899',\n  },\n  https: {\n    edge: 'https://edge.testnet.solana.com:8443',\n    beta: 'https://beta.testnet.solana.com:8443',\n    stable: 'https://testnet.solana.com:8443',\n  },\n};\n\n/**\n * Retrieves the RPC endpoint URL for the specified testnet release\n * channel\n */\nexport function testnetChannelEndpoint(\n  channel?: string,\n  tls?: boolean,\n): string {\n  const key = tls === false ? 'http' : 'https';\n\n  if (!channel) {\n    return endpoint[key][testnetDefaultChannel];\n  }\n\n  const url = endpoint[key][channel];\n  if (!url) {\n    throw new Error(`Unknown ${key} channel: ${channel}`);\n  }\n  return url;\n}\n","// @flow\nexport {Account} from './account';\nexport {BpfLoader} from './bpf-loader';\nexport {BudgetProgram} from './budget-program';\nexport {Connection} from './connection';\nexport {Loader} from './loader';\nexport {NonceAccount} from './nonce-account';\nexport {PublicKey} from './publickey';\nexport {\n  STAKE_CONFIG_ID,\n  Authorized,\n  Lockup,\n  StakeAuthorizationLayout,\n  StakeInstruction,\n  StakeInstructionLayout,\n  StakeProgram,\n} from './stake-program';\nexport {SystemInstruction, SystemProgram} from './system-program';\nexport {Transaction, TransactionInstruction} from './transaction';\nexport {VALIDATOR_INFO_KEY, ValidatorInfo} from './validator-info';\nexport {VOTE_PROGRAM_ID, VoteAccount} from './vote-account';\nexport {\n  SYSVAR_CLOCK_PUBKEY,\n  SYSVAR_RENT_PUBKEY,\n  SYSVAR_REWARDS_PUBKEY,\n  SYSVAR_STAKE_HISTORY_PUBKEY,\n} from './sysvar';\nexport {\n  sendAndConfirmTransaction,\n  sendAndConfirmRecentTransaction,\n} from './util/send-and-confirm-transaction';\nexport {sendAndConfirmRawTransaction} from './util/send-and-confirm-raw-transaction';\nexport {testnetChannelEndpoint} from './util/testnet';\n\n// There are 1-billion lamports in one SOL\nexport const LAMPORTS_PER_SOL = 1000000000;\n"],"names":["toBuffer","arr","Buffer","Uint8Array","from","buffer","byteOffset","byteLength","PublicKey","value","startsWith","_bn","BN","substring","decoded","bs58","decode","length","Error","publicKey","eq","encode","b","toArrayLike","zeroPad","alloc","copy","toBase58","o","fromPublicKey","seed","programId","concat","hash","hasha","algorithm","Account","secretKey","_keypair","nacl","sign","keyPair","fromSecretKey","NUM_TICKS_PER_SECOND","DEFAULT_TICKS_PER_SLOT","property","BufferLayout","rustString","rsl","_decode","bind","_encode","offset","data","chars","toString","str","span","authorized","lockup","getAlloc","type","fields","layout","forEach","item","decodeLength","bytes","len","size","elem","shift","encodeLength","rem_len","push","DEFAULT_SIGNATURE","fill","PACKET_DATA_SIZE","PUBKEY_LENGTH","SIGNATURE_LENGTH","TransactionInstruction","opts","Object","assign","Transaction","signatures","signature","items","instructions","nonceInfo","nonceInstruction","recentBlockhash","nonce","unshift","keys","map","numReadonlySignedAccounts","numReadonlyUnsignedAccounts","programIds","allKeys","instruction","keySignerPair","includes","sort","x","y","checkSigner","isSigner","checkWritable","isWritable","keyStr","pubkey","keyCount","shortvec","keyIndicesCount","dataCount","programIdIndex","indexOf","keyIndices","keyObj","dataLength","invariant","keyIndex","instructionCount","instructionBuffer","instructionBufferLength","instructionLayout","slice","signDataLayout","Layout","transaction","numRequiredSignatures","key","signData","signPartial","partialSigners","accountOrPublicKey","_getSignData","index","detached","signer","findIndex","sigpair","equals","signatureCount","transactionLength","wireTransaction","byteArray","i","accountCount","accounts","account","programIndex","_populate","rpcResult","message","accountKeys","header","numKeys","sigPubkeyPair","instructionData","j","some","SYSVAR_CLOCK_PUBKEY","SYSVAR_RECENT_BLOCKHASHES_PUBKEY","SYSVAR_RENT_PUBKEY","SYSVAR_REWARDS_PUBKEY","SYSVAR_STAKE_HISTORY_PUBKEY","NonceAccountLayout","NonceAccount","nonceAccount","authorizedPubkey","sleep","ms","Promise","resolve","setTimeout","jsonRpcResultAndContext","resultDescription","jsonRpcResult","context","struct","slot","jsonRpcVersion","literal","union","jsonrpc","id","error","result","GetInflationResult","foundation","foundationTerm","initial","storage","taper","terminal","GetEpochInfoResult","epoch","slotIndex","slotsInEpoch","absoluteSlot","GetEpochScheduleResult","slotsPerEpoch","leaderScheduleSlotOffset","warmup","firstNormalEpoch","firstNormalSlot","SignatureStatusResult","Ok","Err","Version","createRpcRequest","url","server","jayson","request","callback","options","method","body","headers","fetch","res","text","args","reject","err","response","GetInflationRpcResult","GetEpochInfoRpcResult","GetEpochScheduleRpcResult","GetBalanceAndContextRpcResult","GetVersionRpcResult","AccountInfoResult","executable","owner","lamports","rentEpoch","GetAccountInfoAndContextRpcResult","AccountNotificationResult","subscription","ProgramAccountInfoResult","ProgramAccountNotificationResult","SlotInfo","parent","root","SlotNotificationResult","SignatureNotificationResult","GetProgramAccountsRpcResult","array","ConfirmTransactionAndContextRpcResult","GetSlot","GetSlotLeader","GetClusterNodes","gossip","tpu","rpc","GetVoteAccounts","current","votePubkey","nodePubkey","activatedStake","epochVoteAccount","epochCredits","tuple","commission","lastVote","rootSlot","delinquent","GetSignatureStatusRpcResult","GetTransactionCountRpcResult","GetTotalSupplyRpcResult","GetMinimumBalanceForRentExemptionRpcResult","GetConfirmedBlockRpcResult","blockhash","previousBlockhash","parentSlot","transactions","meta","status","fee","preBalances","postBalances","rewards","GetRecentBlockhashAndContextRpcResult","feeCalculator","burnPercent","lamportsPerSignature","maxLamportsPerSignature","minLamportsPerSignature","targetLamportsPerSignature","targetSignaturesPerSlot","RequestAirdropRpcResult","SendTransactionRpcResult","Connection","endpoint","commitment","urlParse","_rpcRequest","href","_commitment","_blockhashInfo","seconds","transactionSignatures","protocol","host","port","String","Number","_rpcWebSocket","RpcWebSocketClient","urlFormat","autoconnect","max_reconnects","Infinity","on","_wsOnOpen","_wsOnError","_wsOnClose","_wsOnAccountNotification","_wsOnProgramAccountNotification","_wsOnSlotNotification","_wsOnSignatureNotification","_argsWithCommitment","unsafeRes","assert","getBalanceAndContext","then","e","getAccountInfoAndContext","confirmTransactionAndContext","console","warn","getRecentBlockhashAndContext","fromRpcResult","fromAccountData","getNonceAndContext","to","amount","signers","Date","getSeconds","_disableBlockhashCaching","attempts","startTime","now","getRecentBlockhash","serialize","sendRawTransaction","rawTransaction","encodedTransaction","sendEncodedTransaction","_rpcWebSocketConnected","_updateSubscriptions","log","code","sub","rpcMethod","rpcArgs","subscriptionId","call","unsubscribeId","_accountChangeSubscriptions","programKeys","_programAccountChangeSubscriptions","slotKeys","_slotSubscriptions","signatureKeys","_signatureSubscriptions","close","connect","_subscribe","notification","_accountChangeSubscriptionCounter","subInfo","_unsubscribe","accountId","accountInfo","_programAccountChangeSubscriptionCounter","_slotSubscriptionCounter","override","_signatureSubscriptionCounter","sendAndConfirmRecentTransaction","connection","_sendAndConfirmTransaction","sendAndConfirmTransaction","sendRetries","start","sendTransaction","statusRetries","getSignatureStatus","duration","toFixed","JSON","stringify","Math","random","undefined","encodeData","allocLength","layoutFields","SystemInstruction","SystemProgram","SystemInstructionLayout","Create","CreateWithSeed","WithdrawNonceAccount","Transfer","instructionTypeLayout","typeIndex","t","freeze","Assign","AdvanceNonceAccount","InitializeNonceAccount","AuthorizeNonceAccount","newAccount","space","add","base","createAccount","nonceSpace","newAuthorized","Loader","ceil","chunkSize","payer","program","getMinimumBalanceForRentExemption","balanceNeeded","dataLayout","all","BpfLoader","getMinNumSignatures","elf","load","serializePayment","payment","toData","writeUInt32LE","serializeDate","when","iso","date","pad","number","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","write","serializeCondition","condition","BudgetProgram","pos","conditions","trimmedData","conditionData","paymentData","condition1","condition2","whenData","STAKE_CONFIG_ID","Authorized","staker","withdrawer","Lockup","unixTimestamp","custodian","StakeInstruction","StakeProgram","StakeInstructionLayout","Initialize","Authorize","DelegateStake","Split","Withdraw","Deactivate","StakeAuthorizationLayout","Staker","Withdrawer","stakeAccount","createAccountWithSeed","initialize","stakeAuthorizationType","splitStakePubkey","withdrawerPubkey","VALIDATOR_INFO_KEY","InfoString","name","website","details","keybaseUsername","ValidatorInfo","info","configKeyCount","configKeys","rawInfo","parse","VOTE_PROGRAM_ID","VoteAccountLayout","VoteAccount","va","authorizedVoterPubkey","authorizedWithdrawerPubkey","rootSlotValid","sendAndConfirmRawTransaction","http","edge","beta","stable","https","testnetChannelEndpoint","channel","tls","testnetDefaultChannel","LAMPORTS_PER_SOL"],"mappings":"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"}